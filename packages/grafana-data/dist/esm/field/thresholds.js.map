{"version":3,"file":"thresholds.js","sources":["../../../src/field/thresholds.ts"],"sourcesContent":["import { Threshold, FALLBACK_COLOR, Field, ThresholdsMode } from '../types';\n\nexport const fallBackThreshold: Threshold = { value: 0, color: FALLBACK_COLOR };\n\nexport function getActiveThreshold(value: number, thresholds: Threshold[] | undefined): Threshold {\n  if (!thresholds || thresholds.length === 0) {\n    return fallBackThreshold;\n  }\n\n  let active = thresholds[0];\n\n  for (const threshold of thresholds) {\n    if (value >= threshold.value) {\n      active = threshold;\n    } else {\n      break;\n    }\n  }\n\n  return active;\n}\n\nexport function getActiveThresholdForValue(field: Field, value: number, percent: number): Threshold {\n  const { thresholds } = field.config;\n\n  if (thresholds?.mode === ThresholdsMode.Percentage) {\n    return getActiveThreshold(percent * 100, thresholds?.steps);\n  }\n\n  return getActiveThreshold(value, thresholds?.steps);\n}\n\n/**\n * Sorts the thresholds\n */\nexport function sortThresholds(thresholds: Threshold[]) {\n  return thresholds.sort((t1, t2) => t1.value - t2.value);\n}\n"],"names":[],"mappings":";;;;;;;;;AAEO,MAAM,iBAA+B,GAAA,EAAE,KAAO,EAAA,CAAA,EAAG,OAAO,cAAe,GAAA;AAE9D,SAAA,kBAAA,CAAmB,OAAe,UAAgD,EAAA;AAChG,EAAA,IAAI,CAAC,UAAA,IAAc,UAAW,CAAA,MAAA,KAAW,CAAG,EAAA;AAC1C,IAAO,OAAA,iBAAA,CAAA;AAAA,GACT;AAEA,EAAI,IAAA,MAAA,GAAS,WAAW,CAAC,CAAA,CAAA;AAEzB,EAAA,KAAA,MAAW,aAAa,UAAY,EAAA;AAClC,IAAI,IAAA,KAAA,IAAS,UAAU,KAAO,EAAA;AAC5B,MAAS,MAAA,GAAA,SAAA,CAAA;AAAA,KACJ,MAAA;AACL,MAAA,MAAA;AAAA,KACF;AAAA,GACF;AAEA,EAAO,OAAA,MAAA,CAAA;AACT,CAAA;AAEgB,SAAA,0BAAA,CAA2B,KAAc,EAAA,KAAA,EAAe,OAA4B,EAAA;AAClG,EAAM,MAAA,EAAE,UAAW,EAAA,GAAI,KAAM,CAAA,MAAA,CAAA;AAE7B,EAAI,IAAA,CAAA,UAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,UAAA,CAAY,IAAS,MAAA,cAAA,CAAe,UAAY,EAAA;AAClD,IAAA,OAAO,kBAAmB,CAAA,OAAA,GAAU,GAAK,EAAA,UAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,UAAA,CAAY,KAAK,CAAA,CAAA;AAAA,GAC5D;AAEA,EAAO,OAAA,kBAAA,CAAmB,KAAO,EAAA,UAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,UAAA,CAAY,KAAK,CAAA,CAAA;AACpD,CAAA;AAKO,SAAS,eAAe,UAAyB,EAAA;AACtD,EAAO,OAAA,UAAA,CAAW,KAAK,CAAC,EAAA,EAAI,OAAO,EAAG,CAAA,KAAA,GAAQ,GAAG,KAAK,CAAA,CAAA;AACxD;;;;"}