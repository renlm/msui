{"version":3,"file":"toDataQueryError.js","sources":["../../../src/utils/toDataQueryError.ts"],"sourcesContent":["import { DataQueryError } from '@grafana/data';\n\n/**\n * Convert an object into a DataQueryError -- if this is an HTTP response,\n * it will put the correct values in the error field\n *\n * @public\n */\nexport function toDataQueryError(err: DataQueryError | string | unknown): DataQueryError {\n  const error: DataQueryError = err || {};\n\n  if (!error.message) {\n    if (typeof err === 'string') {\n      return { message: err };\n    }\n\n    let message = 'Query error';\n    if (error.message) {\n      message = error.message;\n    } else if (error.data && error.data.message && error.data?.message !== 'Query data error') {\n      message = error.data.message;\n    } else if (error?.data?.message === 'Query data error' && error?.data?.error) {\n      message = error.data.error;\n    } else if (error.data && error.data.error) {\n      message = error.data.error;\n    } else if (error.status) {\n      message = `Query error: ${error.status} ${error.statusText}`;\n    }\n    error.message = message;\n  }\n\n  return error;\n}\n"],"names":[],"mappings":"AAQO,SAAS,iBAAiB,GAAwD,EAAA;AARzF,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CAAA;AASE,EAAM,MAAA,KAAA,GAAwB,OAAO,EAAC,CAAA;AAEtC,EAAI,IAAA,CAAC,MAAM,OAAS,EAAA;AAClB,IAAI,IAAA,OAAO,QAAQ,QAAU,EAAA;AAC3B,MAAO,OAAA,EAAE,SAAS,GAAI,EAAA,CAAA;AAAA,KACxB;AAEA,IAAA,IAAI,OAAU,GAAA,aAAA,CAAA;AACd,IAAA,IAAI,MAAM,OAAS,EAAA;AACjB,MAAA,OAAA,GAAU,KAAM,CAAA,OAAA,CAAA;AAAA,KAClB,MAAA,IAAW,KAAM,CAAA,IAAA,IAAQ,KAAM,CAAA,IAAA,CAAK,aAAW,EAAM,GAAA,KAAA,CAAA,IAAA,KAAN,IAAY,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,OAAA,MAAY,kBAAoB,EAAA;AACzF,MAAA,OAAA,GAAU,MAAM,IAAK,CAAA,OAAA,CAAA;AAAA,KACvB,MAAA,IAAA,CAAA,CAAW,oCAAO,IAAP,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAa,aAAY,kBAAsB,KAAA,CAAA,EAAA,GAAA,KAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,KAAA,CAAO,IAAP,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAa,KAAO,CAAA,EAAA;AAC5E,MAAA,OAAA,GAAU,MAAM,IAAK,CAAA,KAAA,CAAA;AAAA,KACZ,MAAA,IAAA,KAAA,CAAM,IAAQ,IAAA,KAAA,CAAM,KAAK,KAAO,EAAA;AACzC,MAAA,OAAA,GAAU,MAAM,IAAK,CAAA,KAAA,CAAA;AAAA,KACvB,MAAA,IAAW,MAAM,MAAQ,EAAA;AACvB,MAAA,OAAA,GAAU,CAAgB,aAAA,EAAA,KAAA,CAAM,MAAM,CAAA,CAAA,EAAI,MAAM,UAAU,CAAA,CAAA,CAAA;AAAA,KAC5D;AACA,IAAA,KAAA,CAAM,OAAU,GAAA,OAAA,CAAA;AAAA,GAClB;AAEA,EAAO,OAAA,KAAA,CAAA;AACT;;;;"}