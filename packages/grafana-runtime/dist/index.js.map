{"version":3,"file":"index.js","sources":["../src/services/backendSrv.ts","../src/services/AngularLoader.ts","../src/services/dataSourceSrv.ts","../src/services/LocationSrv.ts","../src/services/EchoSrv.ts","../src/services/templateSrv.ts","../src/services/legacyAngularInjector.ts","../src/services/live.ts","../src/config.ts","../src/services/LocationService.ts","../src/services/appEvents.ts","../src/services/pluginExtensions/utils.ts","../src/services/pluginExtensions/getPluginExtensions.ts","../src/services/pluginExtensions/usePluginExtensions.ts","../src/services/pluginExtensions/usePluginComponent.ts","../src/analytics/types.ts","../src/utils/plugin.ts","../src/analytics/utils.ts","../src/utils/licensing.ts","../src/utils/logging.ts","../src/utils/toDataQueryError.ts","../src/utils/queryResponse.ts","../src/utils/publicDashboardQueryHandler.ts","../src/utils/DataSourceWithBackend.ts","../src/components/PanelRenderer.tsx","../src/components/PanelDataErrorView.tsx","../src/services/QueryRunner.ts","../src/components/PluginPage.tsx","../src/components/DataSourcePicker.tsx","../src/analytics/plugins/eventProperties.ts","../src/analytics/plugins/usePluginInteractionReporter.ts","../src/utils/returnToPrevious.ts","../src/components/EmbeddedDashboard.tsx"],"sourcesContent":["import { Observable } from 'rxjs';\n\n/**\n * Used to initiate a remote call via the {@link BackendSrv}\n *\n * @public\n */\nexport type BackendSrvRequest = {\n  /**\n   * Request URL\n   */\n  url: string;\n\n  /**\n   * Number of times to retry the remote call if it fails.\n   */\n  retry?: number;\n\n  /**\n   * HTTP headers that should be passed along with the remote call.\n   * Please have a look at {@link https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API | Fetch API}\n   * for supported headers.\n   */\n  headers?: Record<string, any>;\n\n  /**\n   * HTTP verb to perform in the remote call GET, POST, PUT etc.\n   */\n  method?: string;\n\n  /**\n   * Set to false an success application alert box will not be shown for successful PUT, DELETE, POST requests\n   */\n  showSuccessAlert?: boolean;\n\n  /**\n   * Set to false to not show an application alert box for request errors\n   */\n  showErrorAlert?: boolean;\n\n  /**\n   * Provided by the initiator to identify a particular remote call. An example\n   * of this is when a datasource plugin triggers a query. If the request id already\n   * exist the backendSrv will try to cancel and replace the previous call with the\n   * new one.\n   */\n  requestId?: string;\n\n  /**\n   * Set to to true to not include call in query inspector\n   */\n  hideFromInspector?: boolean;\n\n  /**\n   * The data to send\n   */\n  data?: any;\n\n  /**\n   * Query params\n   */\n  params?: Record<string, any>;\n\n  /**\n   * Define how the response object should be parsed.  See:\n   *\n   * https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Sending_and_Receiving_Binary_Data\n   *\n   * By default values are json parsed from text\n   */\n  responseType?: 'json' | 'text' | 'arraybuffer' | 'blob';\n\n  /**\n   * The credentials read-only property of the Request interface indicates whether the user agent should send cookies from the other domain in the case of cross-origin requests.\n   */\n  credentials?: RequestCredentials;\n\n  /**\n   * @deprecated withCredentials is deprecated in favor of credentials\n   */\n  withCredentials?: boolean;\n};\n\n/**\n * Response for fetch function in {@link BackendSrv}\n *\n * @public\n */\nexport interface FetchResponse<T = any> {\n  data: T;\n  readonly status: number;\n  readonly statusText: string;\n  readonly ok: boolean;\n  readonly headers: Headers;\n  readonly redirected: boolean;\n  readonly type: ResponseType;\n  readonly url: string;\n  readonly config: BackendSrvRequest;\n  readonly traceId?: string;\n}\n\n/**\n * Error type for fetch function in {@link BackendSrv}\n *\n * @public\n */\nexport interface FetchErrorDataProps {\n  message?: string;\n  status?: string;\n  error?: string | any;\n}\n\n/**\n * Error type for fetch function in {@link BackendSrv}\n *\n * @public\n */\nexport interface FetchError<T = any> {\n  status: number;\n  statusText?: string;\n  data: T;\n  message?: string;\n  cancelled?: boolean;\n  isHandled?: boolean;\n  config: BackendSrvRequest;\n  traceId?: string;\n}\n\nexport function isFetchError(e: unknown): e is FetchError {\n  return typeof e === 'object' && e !== null && 'status' in e && 'data' in e;\n}\n\n/**\n * Used to communicate via http(s) to a remote backend such as the Grafana backend,\n * a datasource etc. The BackendSrv is using the {@link https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API | Fetch API}\n * under the hood to handle all the communication.\n *\n * The request function can be used to perform a remote call by specifying a {@link BackendSrvRequest}.\n * To make the BackendSrv a bit easier to use we have added a couple of shorthand functions that will\n * use default values executing the request.\n *\n * @remarks\n * By default, Grafana displays an error message alert if the remote call fails. To prevent this from\n * happening `showErrorAlert = true` on the options object.\n *\n * @public\n */\nexport interface BackendSrv {\n  get<T = any>(url: string, params?: any, requestId?: string, options?: Partial<BackendSrvRequest>): Promise<T>;\n  delete<T = unknown>(url: string, data?: unknown, options?: Partial<BackendSrvRequest>): Promise<T>;\n  post<T = any>(url: string, data?: unknown, options?: Partial<BackendSrvRequest>): Promise<T>;\n  patch<T = any>(url: string, data?: unknown, options?: Partial<BackendSrvRequest>): Promise<T>;\n  put<T = any>(url: string, data?: unknown, options?: Partial<BackendSrvRequest>): Promise<T>;\n\n  /**\n   * @deprecated Use the `.fetch()` function instead. If you prefer to work with a promise\n   * wrap the Observable returned by fetch with the lastValueFrom function, or use the get|delete|post|patch|put methods.\n   * This method is going to be private from Grafana 10.\n   */\n  request<T = unknown>(options: BackendSrvRequest): Promise<T>;\n\n  /**\n   * Special function used to communicate with datasources that will emit core\n   * events that the Grafana QueryInspector and QueryEditor is listening for to be able\n   * to display datasource query information. Can be skipped by adding `option.silent`\n   * when initializing the request.\n   *\n   * @deprecated Use the fetch function instead\n   */\n  datasourceRequest<T = unknown>(options: BackendSrvRequest): Promise<FetchResponse<T>>;\n\n  /**\n   * Observable http request interface\n   */\n  fetch<T>(options: BackendSrvRequest): Observable<FetchResponse<T>>;\n}\n\nlet singletonInstance: BackendSrv;\n\n/**\n * Used during startup by Grafana to set the BackendSrv so it is available\n * via the {@link getBackendSrv} to the rest of the application.\n *\n * @internal\n */\nexport const setBackendSrv = (instance: BackendSrv) => {\n  singletonInstance = instance;\n};\n\n/**\n * Used to retrieve the {@link BackendSrv} that can be used to communicate\n * via http(s) to a remote backend such as the Grafana backend, a datasource etc.\n *\n * @public\n */\nexport const getBackendSrv = (): BackendSrv => singletonInstance;\n","/**\n * Used to enable rendering of Angular components within a\n * React component without losing proper typings.\n *\n * @example\n * ```typescript\n * class Component extends PureComponent<Props> {\n *   element: HTMLElement;\n *   angularComponent: AngularComponent;\n *\n *   componentDidMount() {\n *     const template = '<angular-component />' // angular template here;\n *     const scopeProps = { ctrl: angularController }; // angular scope properties here\n *     const loader = getAngularLoader();\n *     this.angularComponent = loader.load(this.element, scopeProps, template);\n *   }\n *\n *   componentWillUnmount() {\n *     if (this.angularComponent) {\n *       this.angularComponent.destroy();\n *     }\n *   }\n *\n *   render() {\n *     return (\n *       <div ref={element => (this.element = element)} />\n *     );\n *   }\n * }\n * ```\n *\n * @public\n */\nexport interface AngularComponent {\n  /**\n   * Should be called when the React component will unmount.\n   */\n  destroy(): void;\n  /**\n   * Can be used to trigger a re-render of the Angular component.\n   */\n  digest(): void;\n  /**\n   * Used to access the Angular scope from the React component.\n   */\n  getScope(): any;\n}\n\n/**\n * Used to load an Angular component from the context of a React component.\n * Please see the {@link AngularComponent} for a proper example.\n *\n * @public\n */\nexport interface AngularLoader {\n  /**\n   *\n   * @param elem - the element that the Angular component will be loaded into.\n   * @param scopeProps - values that will be accessed via the Angular scope.\n   * @param template  - template used by the Angular component.\n   */\n  load(elem: any, scopeProps: any, template: string): AngularComponent;\n}\n\nlet instance: AngularLoader;\n\n/**\n * Used during startup by Grafana to set the AngularLoader so it is available\n * via the {@link getAngularLoader} to the rest of the application.\n *\n * @internal\n */\nexport function setAngularLoader(v: AngularLoader) {\n  instance = v;\n}\n\n/**\n * Used to retrieve the {@link AngularLoader} that enables the use of Angular\n * components within a React component.\n *\n * Please see the {@link AngularComponent} for a proper example.\n *\n * @public\n */\nexport function getAngularLoader(): AngularLoader {\n  return instance;\n}\n","import { ScopedVars, DataSourceApi, DataSourceInstanceSettings, DataSourceRef } from '@grafana/data';\n\n/**\n * This is the entry point for communicating with a datasource that is added as\n * a plugin (both external and internal). Via this service you will get access\n * to the {@link @grafana/data#DataSourceApi | DataSourceApi} that have a rich API for\n * communicating with the datasource.\n *\n * @public\n */\nexport interface DataSourceSrv {\n  /**\n   * Returns the requested dataSource. If it cannot be found it rejects the promise.\n   * @param ref - The datasource identifier, typically an object with UID and type,\n   * @param scopedVars - variables used to interpolate a templated passed as name.\n   */\n  get(ref?: DataSourceRef | string | null, scopedVars?: ScopedVars): Promise<DataSourceApi>;\n\n  /**\n   * Get a list of data sources\n   */\n  getList(filters?: GetDataSourceListFilters): DataSourceInstanceSettings[];\n\n  /**\n   * Get settings and plugin metadata by name or uid\n   */\n  getInstanceSettings(\n    ref?: DataSourceRef | string | null,\n    scopedVars?: ScopedVars\n  ): DataSourceInstanceSettings | undefined;\n\n  /**\n   * Reloads the DataSourceSrv\n   */\n  reload(): void;\n}\n\n/** @public */\nexport interface GetDataSourceListFilters {\n  /** Include mixed data source by setting this to true */\n  mixed?: boolean;\n\n  /** Only return data sources that support metrics response */\n  metrics?: boolean;\n\n  /** Only return data sources that support tracing response */\n  tracing?: boolean;\n\n  /** Only return data sources that support logging response */\n  logs?: boolean;\n\n  /** Only return data sources that support annotations */\n  annotations?: boolean;\n\n  /** Only filter data sources that support alerting */\n  alerting?: boolean;\n\n  /**\n   * By default only data sources that can be queried will be returned. Meaning they have tracing,\n   * metrics, logs or annotations flag set in plugin.json file\n   * */\n  all?: boolean;\n\n  /** Set to true to return dashboard data source */\n  dashboard?: boolean;\n\n  /** Set to true to return data source variables */\n  variables?: boolean;\n\n  /** filter list by plugin  */\n  pluginId?: string;\n\n  /** apply a function to filter */\n  filter?: (dataSource: DataSourceInstanceSettings) => boolean;\n\n  /** Only returns datasources matching the specified types (ie. Loki, Prometheus) */\n  type?: string | string[];\n}\n\nlet singletonInstance: DataSourceSrv;\n\n/**\n * Used during startup by Grafana to set the DataSourceSrv so it is available\n * via the {@link getDataSourceSrv} to the rest of the application.\n *\n * @internal\n */\nexport function setDataSourceSrv(instance: DataSourceSrv) {\n  singletonInstance = instance;\n}\n\n/**\n * Used to retrieve the {@link DataSourceSrv} that is the entry point for communicating with\n * a datasource that is added as a plugin (both external and internal).\n *\n * @public\n */\nexport function getDataSourceSrv(): DataSourceSrv {\n  return singletonInstance;\n}\n","import { UrlQueryMap } from '@grafana/data';\n\n/**\n * @public\n * @deprecated in favor of {@link locationService} and will be removed in Grafana 9\n */\nexport interface LocationUpdate {\n  /**\n   * Target path where you automatically wants to navigate the user.\n   */\n  path?: string;\n\n  /**\n   * Specify this value if you want to add values to the query string of the URL.\n   */\n  query?: UrlQueryMap;\n\n  /**\n   * If set to true, the query argument will be added to the existing URL.\n   */\n  partial?: boolean;\n\n  /**\n   * Used internally to sync the Redux state from Angular to make sure that the Redux location\n   * state is in sync when navigating using the Angular router.\n   *\n   * @remarks\n   * Do not change this unless you are the Angular router.\n   *\n   * @internal\n   */\n  routeParams?: UrlQueryMap;\n\n  /*\n   * If set to true, this will replace URL state (ie. cause no new browser history).\n   */\n  replace?: boolean;\n}\n\n/**\n * If you need to automatically navigate the user to a new place in the application this should\n * be done via the LocationSrv and it will make sure to update the application state accordingly.\n *\n * @public\n * @deprecated in favor of {@link locationService} and will be removed in Grafana 9\n */\nexport interface LocationSrv {\n  update(options: LocationUpdate): void;\n}\n\nlet singletonInstance: LocationSrv;\n\n/**\n * Used during startup by Grafana to set the LocationSrv so it is available\n * via the {@link getLocationSrv} to the rest of the application.\n *\n * @internal\n */\nexport function setLocationSrv(instance: LocationSrv) {\n  singletonInstance = instance;\n}\n\n/**\n * Used to retrieve the {@link LocationSrv} that can be used to automatically navigate\n * the user to a new place in Grafana.\n *\n * @public\n * @deprecated in favor of {@link locationService} and will be removed in Grafana 9\n */\nexport function getLocationSrv(): LocationSrv {\n  return singletonInstance;\n}\n","/**\n * Describes a size with width/height\n *\n * @public\n */\nexport interface SizeMeta {\n  width: number;\n  height: number;\n}\n\n/**\n * Describes the meta information that are sent together with each event.\n *\n * @public\n */\nexport interface EchoMeta {\n  screenSize: SizeMeta;\n  windowSize: SizeMeta;\n  userAgent: string;\n  url?: string;\n  path?: string;\n  /**\n   * A unique browser session\n   */\n  sessionId: string;\n  /**\n   * The current users username used to login into Grafana e.g. email.\n   */\n  userLogin: string;\n  /**\n   * The current users unique identifier.\n   */\n  userId: number;\n  /**\n   * True when user is logged in into Grafana.\n   */\n  userSignedIn: boolean;\n  /**\n   * A millisecond epoch\n   */\n  ts: number;\n  /**\n   * A highres timestamp since navigation start\n   */\n  timeSinceNavigationStart: number;\n}\n\n/**\n * Describes echo backends that can be registered to receive of events.\n *\n * @public\n */\nexport interface EchoBackend<T extends EchoEvent = any, O = any> {\n  options: O;\n  supportedEvents: EchoEventType[];\n  flush: () => void;\n  addEvent: (event: T) => void;\n}\n\n/**\n * Describes an echo event.\n *\n * @public\n */\nexport interface EchoEvent<T extends EchoEventType = any, P = any> {\n  type: EchoEventType;\n  /**\n   * Event payload containing event specific data.\n   */\n  payload: P;\n  meta: EchoMeta;\n}\n\n/**\n * Supported echo event types that can be sent via the {@link EchoSrv}.\n *\n * @public\n */\nexport enum EchoEventType {\n  Performance = 'performance',\n  MetaAnalytics = 'meta-analytics',\n  Pageview = 'pageview',\n  Interaction = 'interaction',\n  ExperimentView = 'experimentview',\n  GrafanaJavascriptAgent = 'grafana-javascript-agent',\n}\n\n/**\n * Used to send events to all the registered backends. This should be accessed via the\n * {@link getEchoSrv} function. Will, by default, flush events to the backends every\n * 10s or when the flush function is triggered.\n *\n * @public\n */\nexport interface EchoSrv {\n  /**\n   * Call this to flush current events to the echo backends.\n   */\n  flush(): void;\n  /**\n   * Add a new echo backend to the list of backends that will receive events.\n   */\n  addBackend(backend: EchoBackend): void;\n  /**\n   * Call this to add event that will be sent to the echo backends upon next\n   * flush.\n   *\n   * @param event - Object containing event information.\n   * @param meta - Object that will extend/override the default meta object.\n   */\n  addEvent<T extends EchoEvent>(event: Omit<T, 'meta'>, meta?: {}): void;\n}\n\nlet singletonInstance: EchoSrv;\n\n/**\n * Used during startup by Grafana to set the EchoSrv so it is available\n * via the {@link getEchoSrv} to the rest of the application.\n *\n * @internal\n */\nexport function setEchoSrv(instance: EchoSrv) {\n  // Check if there were any events reported to the FakeEchoSrv (before the main EchoSrv was initialized), and track them\n  if (singletonInstance instanceof FakeEchoSrv) {\n    for (const item of singletonInstance.buffer) {\n      instance.addEvent(item.event, item.meta);\n    }\n  }\n\n  singletonInstance = instance;\n}\n\n/**\n * Used to retrieve the {@link EchoSrv} that can be used to report events to registered\n * echo backends.\n *\n * @public\n */\nexport function getEchoSrv(): EchoSrv {\n  if (!singletonInstance) {\n    singletonInstance = new FakeEchoSrv();\n  }\n\n  return singletonInstance;\n}\n\n/**\n * Used to register echo backends that will receive Grafana echo events during application\n * runtime.\n *\n * @public\n */\nexport const registerEchoBackend = (backend: EchoBackend) => {\n  getEchoSrv().addBackend(backend);\n};\n\nexport class FakeEchoSrv implements EchoSrv {\n  buffer: Array<{ event: Omit<EchoEvent, 'meta'>; meta?: {} | undefined }> = [];\n\n  flush(): void {\n    this.buffer = [];\n  }\n\n  addBackend(backend: EchoBackend): void {}\n\n  addEvent<T extends EchoEvent>(event: Omit<T, 'meta'>, meta?: {} | undefined): void {\n    this.buffer.push({ event, meta });\n  }\n}\n","import { ScopedVars, TimeRange, TypedVariableModel } from '@grafana/data';\n\n/**\n * Can be used to gain more information about an interpolation operation\n */\nexport interface VariableInterpolation {\n  /** The full matched expression including, example: ${varName.field:regex} */\n  match: string;\n  /** In the expression ${varName.field:regex} variableName is varName */\n  variableName: string;\n  /** In the expression ${varName.fields[0].name:regex} the fieldPath is fields[0].name */\n  fieldPath?: string;\n  /** In the expression ${varName:regex} the regex part is the format */\n  format?: string;\n  /** The formatted value of the variable expresion. Will equal match when variable not found or scopedVar was undefined or null **/\n  value: string;\n  // When value === match this will be true, meaning the variable was not found\n  found?: boolean;\n}\n\n/**\n * Via the TemplateSrv consumers get access to all the available template variables\n * that can be used within the current active dashboard.\n *\n * For a more in-depth description visit: https://grafana.com/docs/grafana/latest/reference/templating\n * @public\n */\nexport interface TemplateSrv {\n  /**\n   * List the dashboard variables\n   */\n  getVariables(): TypedVariableModel[];\n\n  /**\n   * Replace the values within the target string.  See also {@link InterpolateFunction}\n   *\n   * Note: interpolations array is being mutated by replace function by adding information about variables that\n   * have been interpolated during replacement. Variables that were specified in the target but not found in\n   * the list of available variables are also added to the array. See {@link VariableInterpolation} for more details.\n   *\n   * @param {VariableInterpolation[]} interpolations an optional map that is updated with interpolated variables\n   */\n  replace(\n    target?: string,\n    scopedVars?: ScopedVars,\n    format?: string | Function,\n    interpolations?: VariableInterpolation[]\n  ): string;\n\n  /**\n   * Checks if a target contains template variables.\n   */\n  containsTemplate(target?: string): boolean;\n\n  /**\n   * Update the current time range to be used when interpolating __from / __to variables.\n   */\n  updateTimeRange(timeRange: TimeRange): void;\n}\n\nlet singletonInstance: TemplateSrv;\n\n/**\n * Used during startup by Grafana to set the TemplateSrv so it is available\n * via the {@link getTemplateSrv} to the rest of the application.\n *\n * @internal\n */\nexport const setTemplateSrv = (instance: TemplateSrv) => {\n  singletonInstance = instance;\n};\n\n/**\n * Used to retrieve the {@link TemplateSrv} that can be used to fetch available\n * template variables.\n *\n * @public\n */\nexport const getTemplateSrv = (): TemplateSrv => singletonInstance;\n","import { auto } from 'angular';\n\nlet singleton: auto.IInjectorService;\n\n/**\n * Used during startup by Grafana to temporarily expose the angular injector to\n * pure javascript plugins using {@link getLegacyAngularInjector}.\n *\n * @internal\n */\nexport const setLegacyAngularInjector = (instance: auto.IInjectorService) => {\n  singleton = instance;\n};\n\n/**\n * WARNING: this function provides a temporary way for plugins to access anything in the\n * angular injector.  While the migration from angular to react continues, there are a few\n * options that do not yet have good alternatives.  Note that use of this function will\n * be removed in the future.\n *\n * @beta\n */\nexport const getLegacyAngularInjector = (): auto.IInjectorService => singleton;\n","import { Observable } from 'rxjs';\n\nimport {\n  DataFrameJSON,\n  DataQueryRequest,\n  DataQueryResponse,\n  LiveChannelAddress,\n  LiveChannelEvent,\n  LiveChannelPresenceStatus,\n  StreamingFrameOptions,\n} from '@grafana/data';\n\n/**\n * @alpha -- experimental\n */\nexport interface LiveDataFilter {\n  fields?: string[];\n}\n\n// StreamingFrameAction and StreamingFrameOptions are now in @grafana/data\nexport { StreamingFrameAction, type StreamingFrameOptions } from '@grafana/data';\n\n/**\n * @alpha\n */\nexport interface LiveDataStreamOptions {\n  addr: LiveChannelAddress;\n  frame?: DataFrameJSON; // initial results\n  key?: string;\n  buffer?: Partial<StreamingFrameOptions>;\n  filter?: LiveDataFilter;\n}\n\n/**\n * @alpha -- experimental: send a normal query request over websockt\n */\nexport interface LiveQueryDataOptions {\n  request: DataQueryRequest;\n  body: unknown; // processed queries, same as sent to `/api/query/ds`\n}\n\n/**\n * @alpha -- experimental\n */\nexport interface GrafanaLiveSrv {\n  /**\n   * Listen for changes to the main service\n   */\n  getConnectionState(): Observable<boolean>;\n\n  /**\n   * Watch for messages in a channel\n   */\n  getStream<T>(address: LiveChannelAddress): Observable<LiveChannelEvent<T>>;\n\n  /**\n   * Connect to a channel and return results as DataFrames\n   */\n  getDataStream(options: LiveDataStreamOptions): Observable<DataQueryResponse>;\n\n  /**\n   * Execute a query over the live websocket and potentiall subscribe to a live channel.\n   *\n   * Since the initial request and subscription are on the same socket, this will support HA setups\n   *\n   * @alpha -- this function requires the feature toggle `queryOverLive` to be set\n   */\n  getQueryData(options: LiveQueryDataOptions): Observable<DataQueryResponse>;\n\n  /**\n   * For channels that support presence, this will request the current state from the server.\n   *\n   * Join and leave messages will be sent to the open stream\n   */\n  getPresence(address: LiveChannelAddress): Promise<LiveChannelPresenceStatus>;\n\n  /**\n   * Publish into a channel\n   *\n   * @alpha -- experimental\n   */\n  publish(address: LiveChannelAddress, data: unknown): Promise<unknown>;\n}\n\nlet singletonInstance: GrafanaLiveSrv;\n\n/**\n * Used during startup by Grafana to set the GrafanaLiveSrv so it is available\n * via the {@link getGrafanaLiveSrv} to the rest of the application.\n *\n * @internal\n */\nexport const setGrafanaLiveSrv = (instance: GrafanaLiveSrv) => {\n  singletonInstance = instance;\n};\n\n/**\n * Used to retrieve the GrafanaLiveSrv that allows you to subscribe to\n * server side events and streams\n *\n * @alpha -- experimental\n */\nexport const getGrafanaLiveSrv = (): GrafanaLiveSrv => singletonInstance;\n","import { merge } from 'lodash';\n\nimport {\n  AuthSettings,\n  BootData,\n  BuildInfo,\n  DataSourceInstanceSettings,\n  FeatureToggles,\n  GrafanaConfig,\n  GrafanaTheme,\n  GrafanaTheme2,\n  LicenseInfo,\n  MapLayerOptions,\n  OAuthSettings,\n  PanelPluginMeta,\n  systemDateFormats,\n  SystemDateFormatSettings,\n  getThemeById,\n  AngularMeta,\n} from '@grafana/data';\n\nexport interface AzureSettings {\n  cloud?: string;\n  clouds?: AzureCloudInfo[];\n  managedIdentityEnabled: boolean;\n  workloadIdentityEnabled: boolean;\n  userIdentityEnabled: boolean;\n  userIdentityFallbackCredentialsEnabled: boolean;\n}\n\nexport interface AzureCloudInfo {\n  name: string;\n  displayName: string;\n}\n\nexport type AppPluginConfig = {\n  id: string;\n  path: string;\n  version: string;\n  preload: boolean;\n  angular: AngularMeta;\n};\n\nexport class GrafanaBootConfig implements GrafanaConfig {\n  publicDashboardAccessToken?: string;\n  publicDashboardsEnabled = true;\n  snapshotEnabled = true;\n  datasources: { [str: string]: DataSourceInstanceSettings } = {};\n  panels: { [key: string]: PanelPluginMeta } = {};\n  apps: Record<string, AppPluginConfig> = {};\n  auth: AuthSettings = {};\n  minRefreshInterval = '';\n  appUrl = '';\n  appSubUrl = '';\n  namespace = 'default';\n  windowTitlePrefix = '';\n  buildInfo: BuildInfo;\n  newPanelTitle = '';\n  bootData: BootData;\n  externalUserMngLinkUrl = '';\n  externalUserMngLinkName = '';\n  externalUserMngInfo = '';\n  allowOrgCreate = false;\n  feedbackLinksEnabled = true;\n  disableLoginForm = false;\n  defaultDatasource = ''; // UID\n  angularSupportEnabled = false;\n  authProxyEnabled = false;\n  exploreEnabled = false;\n  queryHistoryEnabled = false;\n  helpEnabled = false;\n  profileEnabled = false;\n  newsFeedEnabled = true;\n  ldapEnabled = false;\n  jwtHeaderName = '';\n  jwtUrlLogin = false;\n  sigV4AuthEnabled = false;\n  azureAuthEnabled = false;\n  secureSocksDSProxyEnabled = false;\n  samlEnabled = false;\n  samlName = '';\n  autoAssignOrg = true;\n  verifyEmailEnabled = false;\n  oauth: OAuthSettings = {};\n  rbacEnabled = true;\n  disableUserSignUp = false;\n  loginHint = '';\n  passwordHint = '';\n  loginError: string | undefined = undefined;\n  viewersCanEdit = false;\n  editorsCanAdmin = false;\n  disableSanitizeHtml = false;\n  trustedTypesDefaultPolicyEnabled = false;\n  cspReportOnlyEnabled = false;\n  liveEnabled = true;\n  /** @deprecated Use `theme2` instead. */\n  theme: GrafanaTheme;\n  theme2: GrafanaTheme2;\n  featureToggles: FeatureToggles = {};\n  anonymousEnabled = false;\n  anonymousDeviceLimit: number | undefined = undefined;\n  licenseInfo: LicenseInfo = {} as LicenseInfo;\n  rendererAvailable = false;\n  rendererVersion = '';\n  rendererDefaultImageWidth = 1000;\n  rendererDefaultImageHeight = 500;\n  rendererDefaultImageScale = 1;\n  secretsManagerPluginEnabled = false;\n  supportBundlesEnabled = false;\n  http2Enabled = false;\n  dateFormats?: SystemDateFormatSettings;\n  grafanaJavascriptAgent = {\n    enabled: false,\n    customEndpoint: '',\n    apiKey: '',\n    errorInstrumentalizationEnabled: true,\n    consoleInstrumentalizationEnabled: false,\n    webVitalsInstrumentalizationEnabled: false,\n  };\n  pluginCatalogURL = 'https://grafana.com/grafana/plugins/';\n  pluginAdminEnabled = true;\n  pluginAdminExternalManageEnabled = false;\n  pluginCatalogHiddenPlugins: string[] = [];\n  pluginsCDNBaseURL = '';\n  expressionsEnabled = false;\n  customTheme?: undefined;\n  awsAllowedAuthProviders: string[] = [];\n  awsAssumeRoleEnabled = false;\n  azure: AzureSettings = {\n    managedIdentityEnabled: false,\n    workloadIdentityEnabled: false,\n    userIdentityEnabled: false,\n    userIdentityFallbackCredentialsEnabled: false,\n  };\n  caching = {\n    enabled: false,\n  };\n  geomapDefaultBaseLayerConfig?: MapLayerOptions;\n  geomapDisableCustomBaseLayer?: boolean;\n  unifiedAlertingEnabled = false;\n  unifiedAlerting = {\n    minInterval: '',\n    alertStateHistoryBackend: undefined,\n    alertStateHistoryPrimary: undefined,\n  };\n  applicationInsightsConnectionString?: string;\n  applicationInsightsEndpointUrl?: string;\n  recordedQueries = {\n    enabled: true,\n  };\n  featureHighlights = {\n    enabled: false,\n  };\n  reporting = {\n    enabled: true,\n  };\n  analytics = {\n    enabled: true,\n  };\n  googleAnalyticsId: undefined;\n  googleAnalytics4Id: undefined;\n  googleAnalytics4SendManualPageViews = false;\n  rudderstackWriteKey: undefined;\n  rudderstackDataPlaneUrl: undefined;\n  rudderstackSdkUrl: undefined;\n  rudderstackConfigUrl: undefined;\n  rudderstackIntegrationsUrl: undefined;\n  sqlConnectionLimits = {\n    maxOpenConns: 100,\n    maxIdleConns: 100,\n    connMaxLifetime: 14400,\n  };\n\n  tokenExpirationDayLimit: undefined;\n  disableFrontendSandboxForPlugins: string[] = [];\n  sharedWithMeFolderUID: string | undefined;\n  rootFolderUID: string | undefined;\n  localFileSystemAvailable: boolean | undefined;\n  cloudMigrationIsTarget: boolean | undefined;\n\n  /**\n   * Language used in Grafana's UI. This is after the user's preference (or deteceted locale) is resolved to one of\n   * Grafana's supported language.\n   */\n  language: string | undefined;\n\n  constructor(options: GrafanaBootConfig) {\n    this.bootData = options.bootData;\n\n    const defaults = {\n      datasources: {},\n      windowTitlePrefix: 'Grafana - ',\n      panels: {},\n      newPanelTitle: 'Panel Title',\n      playlist_timespan: '1m',\n      unsaved_changes_warning: true,\n      appUrl: '',\n      appSubUrl: '',\n      buildInfo: {\n        version: '1.0',\n        commit: '1',\n        env: 'production',\n      },\n      viewersCanEdit: false,\n      editorsCanAdmin: false,\n      disableSanitizeHtml: false,\n    };\n\n    merge(this, defaults, options);\n\n    this.buildInfo = options.buildInfo || defaults.buildInfo;\n\n    if (this.dateFormats) {\n      systemDateFormats.update(this.dateFormats);\n    }\n\n    overrideFeatureTogglesFromUrl(this);\n    overrideFeatureTogglesFromLocalStorage(this);\n\n    if (this.featureToggles.disableAngular) {\n      this.angularSupportEnabled = false;\n    }\n\n    // Creating theme after applying feature toggle overrides in case we need to toggle anything\n    this.theme2 = getThemeById(this.bootData.user.theme);\n    this.bootData.user.lightTheme = this.theme2.isLight;\n    this.theme = this.theme2.v1;\n  }\n}\n\n// localstorage key: grafana.featureToggles\n// example value: panelEditor=1,panelInspector=1\nfunction overrideFeatureTogglesFromLocalStorage(config: GrafanaBootConfig) {\n  const featureToggles = config.featureToggles;\n  const localStorageKey = 'grafana.featureToggles';\n  const localStorageValue = window.localStorage.getItem(localStorageKey);\n  if (localStorageValue) {\n    const features = localStorageValue.split(',');\n    for (const feature of features) {\n      const [featureName, featureValue] = feature.split('=');\n      const toggleState = featureValue === 'true' || featureValue === '1';\n      // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n      featureToggles[featureName as keyof FeatureToggles] = toggleState;\n      console.log(`Setting feature toggle ${featureName} = ${toggleState} via localstorage`);\n    }\n  }\n}\n\nfunction overrideFeatureTogglesFromUrl(config: GrafanaBootConfig) {\n  if (window.location.href.indexOf('__feature') === -1) {\n    return;\n  }\n\n  const isDevelopment = config.buildInfo.env === 'development';\n\n  // Although most flags can not be changed from the URL in production,\n  // some of them are safe (and useful!) to change dynamically from the browser URL\n  const safeRuntimeFeatureFlags = new Set(['queryServiceFromUI']);\n\n  const params = new URLSearchParams(window.location.search);\n  params.forEach((value, key) => {\n    if (key.startsWith('__feature.')) {\n      const featureToggles = config.featureToggles as Record<string, boolean>;\n      const featureName = key.substring(10);\n\n      const toggleState = value === 'true' || value === ''; // browser rewrites true as ''\n      if (toggleState !== featureToggles[key]) {\n        if (isDevelopment || safeRuntimeFeatureFlags.has(featureName)) {\n          featureToggles[featureName] = toggleState;\n          console.log(`Setting feature toggle ${featureName} = ${toggleState} via url`);\n        } else {\n          console.log(`Unable to change feature toggle ${featureName} via url in production.`);\n        }\n      }\n    }\n  });\n}\n\nconst bootData = (window as any).grafanaBootData || {\n  settings: {},\n  user: {},\n  navTree: [],\n};\n\nconst options = bootData.settings;\noptions.bootData = bootData;\n\n/**\n * Use this to access the {@link GrafanaBootConfig} for the current running Grafana instance.\n *\n * @public\n */\nexport const config = new GrafanaBootConfig(options);\n","import * as H from 'history';\n\nimport { deprecationWarning, UrlQueryMap, urlUtil } from '@grafana/data';\nimport { attachDebugger, createLogger } from '@grafana/ui';\n\nimport { config } from '../config';\n\nimport { LocationUpdate } from './LocationSrv';\n\n/**\n * @public\n * A wrapper to help work with browser location and history\n */\nexport interface LocationService {\n  partial: (query: Record<string, any>, replace?: boolean) => void;\n  push: (location: H.Path | H.LocationDescriptor<any>) => void;\n  replace: (location: H.Path | H.LocationDescriptor<any>) => void;\n  reload: () => void;\n  getLocation: () => H.Location;\n  getHistory: () => H.History;\n  getSearch: () => URLSearchParams;\n  getSearchObject: () => UrlQueryMap;\n\n  /**\n   * This is from the old LocationSrv interface\n   * @deprecated use partial, push or replace instead */\n  update: (update: LocationUpdate) => void;\n}\n\n/** @internal */\nexport class HistoryWrapper implements LocationService {\n  private readonly history: H.History;\n\n  constructor(history?: H.History) {\n    // If no history passed create an in memory one if being called from test\n    this.history =\n      history ||\n      (process.env.NODE_ENV === 'test'\n        ? H.createMemoryHistory({ initialEntries: ['/'] })\n        : H.createBrowserHistory({ basename: config.appSubUrl ?? '/' }));\n\n    this.partial = this.partial.bind(this);\n    this.push = this.push.bind(this);\n    this.replace = this.replace.bind(this);\n    this.getSearch = this.getSearch.bind(this);\n    this.getHistory = this.getHistory.bind(this);\n    this.getLocation = this.getLocation.bind(this);\n  }\n\n  getHistory() {\n    return this.history;\n  }\n\n  getSearch() {\n    return new URLSearchParams(this.history.location.search);\n  }\n\n  partial(query: Record<string, any>, replace?: boolean) {\n    const currentLocation = this.history.location;\n    const newQuery = this.getSearchObject();\n\n    for (const key in query) {\n      // removing params with null | undefined\n      if (query[key] === null || query[key] === undefined) {\n        delete newQuery[key];\n      } else {\n        newQuery[key] = query[key];\n      }\n    }\n\n    const updatedUrl = urlUtil.renderUrl(currentLocation.pathname, newQuery);\n\n    if (replace) {\n      this.history.replace(updatedUrl, this.history.location.state);\n    } else {\n      this.history.push(updatedUrl, this.history.location.state);\n    }\n  }\n\n  push(location: H.Path | H.LocationDescriptor) {\n    this.history.push(location);\n  }\n\n  replace(location: H.Path | H.LocationDescriptor) {\n    this.history.replace(location);\n  }\n\n  reload() {\n    const prevState = (this.history.location.state as any)?.routeReloadCounter;\n    this.history.replace({\n      ...this.history.location,\n      state: { routeReloadCounter: prevState ? prevState + 1 : 1 },\n    });\n  }\n\n  getLocation() {\n    return this.history.location;\n  }\n\n  getSearchObject() {\n    return locationSearchToObject(this.history.location.search);\n  }\n\n  /** @deprecated use partial, push or replace instead */\n  update(options: LocationUpdate) {\n    deprecationWarning('LocationSrv', 'update', 'partial, push or replace');\n    if (options.partial && options.query) {\n      this.partial(options.query, options.partial);\n    } else {\n      const newLocation: H.LocationDescriptor = {\n        pathname: options.path,\n      };\n      if (options.query) {\n        newLocation.search = urlUtil.toUrlParams(options.query);\n      }\n      if (options.replace) {\n        this.replace(newLocation);\n      } else {\n        this.push(newLocation);\n      }\n    }\n  }\n}\n\n/**\n * @public\n * Parses a location search string to an object\n * */\nexport function locationSearchToObject(search: string | number): UrlQueryMap {\n  let queryString = typeof search === 'number' ? String(search) : search;\n\n  if (queryString.length > 0) {\n    if (queryString.startsWith('?')) {\n      return urlUtil.parseKeyValue(queryString.substring(1));\n    }\n    return urlUtil.parseKeyValue(queryString);\n  }\n\n  return {};\n}\n\n/**\n * @public\n */\nexport let locationService: LocationService = new HistoryWrapper();\n\n/**\n * Used for tests only\n * @internal\n */\nexport const setLocationService = (location: LocationService) => {\n  if (process.env.NODE_ENV !== 'test') {\n    throw new Error('locationService can be only overriden in test environment');\n  }\n  locationService = location;\n};\n\nconst navigationLog = createLogger('Router');\n\n/** @internal */\nexport const navigationLogger = navigationLog.logger;\n\n// For debugging purposes the location service is attached to global _debug variable\nattachDebugger('location', locationService, navigationLog);\n","import { BusEventBase, BusEventWithPayload, EventBus, GrafanaTheme2, PanelModel, TimeRange } from '@grafana/data';\n\n/**\n * Called when a dashboard is refreshed\n *\n * @public\n */\nexport class RefreshEvent extends BusEventBase {\n  static type = 'refresh';\n}\n\n/**\n * Called when the theme settings change\n *\n * @public\n */\nexport class ThemeChangedEvent extends BusEventWithPayload<GrafanaTheme2> {\n  static type = 'theme-changed';\n}\n\n/**\n * Called when time range is updated\n *\n * @public\n */\nexport class TimeRangeUpdatedEvent extends BusEventWithPayload<TimeRange> {\n  static type = 'time-range-updated';\n}\n\n/**\n * Called to copy a panel JSON into local storage\n *\n * @public\n */\nexport class CopyPanelEvent extends BusEventWithPayload<PanelModel> {\n  static type = 'copy-panel';\n}\n\n// Internal singleton instance\nlet singletonInstance: EventBus;\n\n/**\n * Used during startup by Grafana to set the setAppEvents so it is available\n * via the {@link setAppEvents} to the rest of the application.\n *\n * @internal\n */\nexport function setAppEvents(instance: EventBus) {\n  singletonInstance = instance;\n}\n\n/**\n * Used to retrieve an event bus that manages application level events\n *\n * @public\n */\nexport function getAppEvents(): EventBus {\n  return singletonInstance;\n}\n","import {\n  type PluginExtension,\n  type PluginExtensionComponent,\n  type PluginExtensionLink,\n  PluginExtensionTypes,\n} from '@grafana/data';\n\nexport function isPluginExtensionLink(extension: PluginExtension | undefined): extension is PluginExtensionLink {\n  if (!extension) {\n    return false;\n  }\n  return extension.type === PluginExtensionTypes.link && ('path' in extension || 'onClick' in extension);\n}\n\nexport function isPluginExtensionComponent(\n  extension: PluginExtension | undefined\n): extension is PluginExtensionComponent {\n  if (!extension) {\n    return false;\n  }\n  return extension.type === PluginExtensionTypes.component && 'component' in extension;\n}\n","import type { PluginExtension, PluginExtensionLink, PluginExtensionComponent } from '@grafana/data';\n\nimport { isPluginExtensionComponent, isPluginExtensionLink } from './utils';\n\nexport type GetPluginExtensions<T = PluginExtension> = (\n  options: GetPluginExtensionsOptions\n) => GetPluginExtensionsResult<T>;\n\nexport type UsePluginExtensions<T = PluginExtension> = (\n  options: GetPluginExtensionsOptions\n) => UsePluginExtensionsResult<T>;\n\nexport type GetPluginExtensionsOptions = {\n  extensionPointId: string;\n  context?: object | Record<string | symbol, unknown>;\n  limitPerPlugin?: number;\n};\n\nexport type GetPluginExtensionsResult<T = PluginExtension> = {\n  extensions: T[];\n};\n\nexport type UsePluginExtensionsResult<T = PluginExtension> = {\n  extensions: T[];\n  isLoading: boolean;\n};\n\nexport type UsePluginComponentResult<Props = {}> = {\n  component: React.ComponentType<Props> | undefined | null;\n  isLoading: boolean;\n};\n\nlet singleton: GetPluginExtensions | undefined;\n\nexport function setPluginExtensionGetter(instance: GetPluginExtensions): void {\n  // We allow overriding the registry in tests\n  if (singleton && process.env.NODE_ENV !== 'test') {\n    throw new Error('setPluginExtensionGetter() function should only be called once, when Grafana is starting.');\n  }\n  singleton = instance;\n}\n\nfunction getPluginExtensionGetter(): GetPluginExtensions {\n  if (!singleton) {\n    throw new Error('getPluginExtensionGetter() can only be used after the Grafana instance has started.');\n  }\n  return singleton;\n}\n\nexport const getPluginExtensions: GetPluginExtensions = (options) => getPluginExtensionGetter()(options);\n\nexport const getPluginLinkExtensions: GetPluginExtensions<PluginExtensionLink> = (options) => {\n  const { extensions } = getPluginExtensions(options);\n\n  return {\n    extensions: extensions.filter(isPluginExtensionLink),\n  };\n};\n\n// This getter doesn't support the `context` option (contextual information can be passed in as component props)\nexport const getPluginComponentExtensions = <Props = {}>(options: {\n  extensionPointId: string;\n  limitPerPlugin?: number;\n}): { extensions: Array<PluginExtensionComponent<Props>> } => {\n  const { extensions } = getPluginExtensions(options);\n  const componentExtensions = extensions.filter(isPluginExtensionComponent) as Array<PluginExtensionComponent<Props>>;\n\n  return {\n    extensions: componentExtensions,\n  };\n};\n","import { useMemo } from 'react';\n\nimport { PluginExtensionComponent, PluginExtensionLink } from '@grafana/data';\n\nimport { GetPluginExtensionsOptions, UsePluginExtensions, UsePluginExtensionsResult } from './getPluginExtensions';\nimport { isPluginExtensionComponent, isPluginExtensionLink } from './utils';\n\nlet singleton: UsePluginExtensions | undefined;\n\nexport function setPluginExtensionsHook(hook: UsePluginExtensions): void {\n  // We allow overriding the registry in tests\n  if (singleton && process.env.NODE_ENV !== 'test') {\n    throw new Error('setPluginExtensionsHook() function should only be called once, when Grafana is starting.');\n  }\n  singleton = hook;\n}\n\n/**\n * @deprecated Use either usePluginLinks() or usePluginComponents() instead.\n */\nexport function usePluginExtensions(options: GetPluginExtensionsOptions): UsePluginExtensionsResult {\n  if (!singleton) {\n    throw new Error('usePluginExtensions(options) can only be used after the Grafana instance has started.');\n  }\n  return singleton(options);\n}\n\nexport function usePluginLinks(options: GetPluginExtensionsOptions): {\n  links: PluginExtensionLink[];\n  isLoading: boolean;\n} {\n  const { extensions, isLoading } = usePluginExtensions(options);\n\n  return useMemo(() => {\n    return {\n      links: extensions.filter(isPluginExtensionLink),\n      isLoading,\n    };\n  }, [extensions, isLoading]);\n}\n\nexport function usePluginComponents<Props = {}>(\n  options: GetPluginExtensionsOptions\n): { components: Array<React.ComponentType<Props>>; isLoading: boolean } {\n  const { extensions, isLoading } = usePluginExtensions(options);\n\n  return useMemo(\n    () => ({\n      components: extensions\n        .filter(isPluginExtensionComponent)\n        .map(({ component }) => component as React.ComponentType<Props>),\n      isLoading,\n    }),\n    [extensions, isLoading]\n  );\n}\n\n/**\n * @deprecated Use usePluginLinks() instead.\n */\nexport function usePluginLinkExtensions(\n  options: GetPluginExtensionsOptions\n): UsePluginExtensionsResult<PluginExtensionLink> {\n  const { extensions, isLoading } = usePluginExtensions(options);\n\n  return useMemo(() => {\n    return {\n      extensions: extensions.filter(isPluginExtensionLink),\n      isLoading,\n    };\n  }, [extensions, isLoading]);\n}\n\n/**\n * @deprecated Use usePluginComponents() instead.\n */\nexport function usePluginComponentExtensions<Props = {}>(\n  options: GetPluginExtensionsOptions\n): { extensions: Array<PluginExtensionComponent<Props>>; isLoading: boolean } {\n  const { extensions, isLoading } = usePluginExtensions(options);\n\n  return useMemo(\n    () => ({\n      extensions: extensions.filter(isPluginExtensionComponent) as Array<PluginExtensionComponent<Props>>,\n      isLoading,\n    }),\n    [extensions, isLoading]\n  );\n}\n","import { UsePluginComponentResult } from './getPluginExtensions';\n\nexport type UsePluginComponent<Props extends object = {}> = (id: string) => UsePluginComponentResult<Props>;\n\nlet singleton: UsePluginComponent | undefined;\n\nexport function setPluginComponentHook(hook: UsePluginComponent): void {\n  // We allow overriding the registry in tests\n  if (singleton && process.env.NODE_ENV !== 'test') {\n    throw new Error('setPluginComponentHook() function should only be called once, when Grafana is starting.');\n  }\n  singleton = hook;\n}\n\nexport function usePluginComponent<Props extends object = {}>(id: string): UsePluginComponentResult<Props> {\n  if (!singleton) {\n    throw new Error('setPluginComponentHook(options) can only be used after the Grafana instance has started.');\n  }\n  return singleton(id) as UsePluginComponentResult<Props>;\n}\n","import { CoreApp } from '@grafana/data';\n\nimport { EchoEvent, EchoEventType } from '../services/EchoSrv';\n\n/**\n * Describes the basic dashboard information that can be passed as the meta\n * analytics payload.\n *\n * @public\n */\nexport interface DashboardInfo {\n  /** @deprecated -- use UID not internal ID */\n  dashboardId: number;\n  dashboardUid: string;\n  dashboardName: string;\n  folderName?: string;\n}\n\n/**\n * Describes the data request information passed as the meta analytics payload.\n *\n * @public\n */\nexport interface DataRequestInfo extends Partial<DashboardInfo> {\n  source?: CoreApp | string;\n  datasourceName: string;\n  datasourceId: number;\n  datasourceUid: string;\n  datasourceType: string;\n  panelId?: number;\n  panelPluginId?: string;\n  panelName?: string;\n  duration: number;\n  error?: string;\n  dataSize?: number;\n}\n\n/**\n * The meta analytics events that can be added to the echo service.\n *\n * @public\n */\nexport enum MetaAnalyticsEventName {\n  DashboardView = 'dashboard-view',\n  DataRequest = 'data-request',\n}\n\n/**\n * Describes the payload of a dashboard view event.\n *\n * @public\n */\nexport interface DashboardViewEventPayload extends DashboardInfo {\n  eventName: MetaAnalyticsEventName.DashboardView;\n}\n\n/**\n * Describes the payload of a data request event.\n *\n * @public\n */\nexport interface DataRequestEventPayload extends DataRequestInfo {\n  eventName: MetaAnalyticsEventName.DataRequest;\n  totalQueries?: number;\n  cachedQueries?: number;\n}\n\n/**\n * Describes the meta analytics payload passed with the {@link MetaAnalyticsEvent}\n *\n * @public\n */\nexport type MetaAnalyticsEventPayload = DashboardViewEventPayload | DataRequestEventPayload;\n\n/**\n * Describes meta analytics event with predefined {@link EchoEventType.EchoEventType} type.\n *\n * @public\n */\nexport interface MetaAnalyticsEvent extends EchoEvent<EchoEventType.MetaAnalytics, MetaAnalyticsEventPayload> {}\n\n/**\n * Describes the payload of a pageview event.\n *\n * @public\n */\nexport interface PageviewEchoEventPayload {\n  page: string;\n}\n\n/**\n * Describes pageview event with predefined {@link EchoEventType.EchoEventType} type.\n *\n * @public\n */\nexport type PageviewEchoEvent = EchoEvent<EchoEventType.Pageview, PageviewEchoEventPayload>;\n\n/**\n * Describes the payload of a user interaction event.\n *\n * @public\n */\nexport interface InteractionEchoEventPayload {\n  interactionName: string;\n  properties?: Record<string, any>;\n}\n\n/**\n * Describes interaction event with predefined {@link EchoEventType.EchoEventType} type.\n *\n * @public\n */\nexport type InteractionEchoEvent = EchoEvent<EchoEventType.Interaction, InteractionEchoEventPayload>;\n\n/**\n * Describes the payload of an experimentview event.\n *\n * @public\n */\nexport interface ExperimentViewEchoEventPayload {\n  experimentId: string;\n  experimentGroup: string;\n  experimentVariant: string;\n}\n\n/**\n * Describes experimentview event with predefined {@link EchoEventType.EchoEventType} type.\n *\n * @public\n */\nexport type ExperimentViewEchoEvent = EchoEvent<EchoEventType.ExperimentView, ExperimentViewEchoEventPayload>;\n\n/**\n * Pageview event typeguard.\n *\n * @public\n */\nexport const isPageviewEvent = (event: EchoEvent): event is PageviewEchoEvent => {\n  return Boolean(event.payload.page);\n};\n\n/**\n * Interaction event typeguard.\n *\n * @public\n */\nexport const isInteractionEvent = (event: EchoEvent): event is InteractionEchoEvent => {\n  return Boolean(event.payload.interactionName);\n};\n\n/**\n * Experimentview event typeguard.\n *\n * @public\n */\nexport const isExperimentViewEvent = (event: EchoEvent): event is ExperimentViewEchoEvent => {\n  return Boolean(event.payload.experimentId);\n};\n","import { PanelPlugin } from '@grafana/data';\n\nimport { config } from '../config';\n\n/**\n * Option to specify a plugin css that should be applied for the dark\n * and the light theme.\n *\n * @public\n */\nexport interface PluginCssOptions {\n  light: string;\n  dark: string;\n}\n\n/**\n * Use this to load css for a Grafana plugin by specifying a {@link PluginCssOptions}\n * containing styling for the dark and the light theme.\n *\n * @param options - plugin styling for light and dark theme.\n * @public\n */\nexport async function loadPluginCss(options: PluginCssOptions): Promise<System.Module | void> {\n  try {\n    const cssPath = config.bootData.user.theme === 'light' ? options.light : options.dark;\n    return window.System.import(cssPath);\n  } catch (err) {\n    console.error(err);\n  }\n}\n\ninterface PluginImportUtils {\n  importPanelPlugin: (id: string) => Promise<PanelPlugin>;\n  getPanelPluginFromCache: (id: string) => PanelPlugin | undefined;\n}\n\nlet pluginImportUtils: PluginImportUtils | undefined;\n\nexport function setPluginImportUtils(utils: PluginImportUtils) {\n  if (pluginImportUtils) {\n    throw new Error('pluginImportUtils should only be set once, when Grafana is starting.');\n  }\n\n  pluginImportUtils = utils;\n}\n\nexport function getPluginImportUtils(): PluginImportUtils {\n  if (!pluginImportUtils) {\n    throw new Error('pluginImportUtils can only be used after Grafana instance has started.');\n  }\n\n  return pluginImportUtils;\n}\n","import { config } from '../config';\nimport { locationService } from '../services';\nimport { getEchoSrv, EchoEventType } from '../services/EchoSrv';\n\nimport {\n  ExperimentViewEchoEvent,\n  InteractionEchoEvent,\n  MetaAnalyticsEvent,\n  MetaAnalyticsEventPayload,\n  PageviewEchoEvent,\n} from './types';\n\n/**\n * Helper function to report meta analytics to the {@link EchoSrv}.\n *\n * @public\n */\nexport const reportMetaAnalytics = (payload: MetaAnalyticsEventPayload) => {\n  getEchoSrv().addEvent<MetaAnalyticsEvent>({\n    type: EchoEventType.MetaAnalytics,\n    payload,\n  });\n};\n\n/**\n * Helper function to report pageview events to the {@link EchoSrv}.\n *\n * @public\n */\nexport const reportPageview = () => {\n  const location = locationService.getLocation();\n  const page = `${config.appSubUrl ?? ''}${location.pathname}${location.search}${location.hash}`;\n  getEchoSrv().addEvent<PageviewEchoEvent>({\n    type: EchoEventType.Pageview,\n    payload: {\n      page,\n    },\n  });\n};\n\n/**\n * Helper function to report interaction events to the {@link EchoSrv}.\n *\n * @public\n */\nexport const reportInteraction = (interactionName: string, properties?: Record<string, unknown>) => {\n  getEchoSrv().addEvent<InteractionEchoEvent>({\n    type: EchoEventType.Interaction,\n    payload: {\n      interactionName,\n      properties,\n    },\n  });\n};\n\n/**\n * Helper function to report experimentview events to the {@link EchoSrv}.\n *\n * @public\n */\nexport const reportExperimentView = (id: string, group: string, variant: string) => {\n  getEchoSrv().addEvent<ExperimentViewEchoEvent>({\n    type: EchoEventType.ExperimentView,\n    payload: {\n      experimentId: id,\n      experimentGroup: group,\n      experimentVariant: variant,\n    },\n  });\n};\n","import { config } from '../config';\n\nexport const featureEnabled = (feature: string): boolean => {\n  const { enabledFeatures } = config.licenseInfo;\n  return enabledFeatures && enabledFeatures[feature];\n};\n","import { faro, LogContext, LogLevel } from '@grafana/faro-web-sdk';\n\nimport { config } from '../config';\n\nexport { LogLevel };\n\n/**\n * Log a message at INFO level\n * @public\n */\nexport function logInfo(message: string, contexts?: LogContext) {\n  if (config.grafanaJavascriptAgent.enabled) {\n    faro.api.pushLog([message], {\n      level: LogLevel.INFO,\n      context: contexts,\n    });\n  }\n}\n\n/**\n * Log a message at WARNING level\n *\n * @public\n */\nexport function logWarning(message: string, contexts?: LogContext) {\n  if (config.grafanaJavascriptAgent.enabled) {\n    faro.api.pushLog([message], {\n      level: LogLevel.WARN,\n      context: contexts,\n    });\n  }\n}\n\n/**\n * Log a message at DEBUG level\n *\n * @public\n */\nexport function logDebug(message: string, contexts?: LogContext) {\n  if (config.grafanaJavascriptAgent.enabled) {\n    faro.api.pushLog([message], {\n      level: LogLevel.DEBUG,\n      context: contexts,\n    });\n  }\n}\n\n/**\n * Log an error\n *\n * @public\n */\nexport function logError(err: Error, contexts?: LogContext) {\n  if (config.grafanaJavascriptAgent.enabled) {\n    faro.api.pushError(err, {\n      context: contexts,\n    });\n  }\n}\n\n/**\n * Log a measurement\n *\n * @public\n */\nexport type MeasurementValues = Record<string, number>;\nexport function logMeasurement(type: string, values: MeasurementValues, context?: LogContext) {\n  if (config.grafanaJavascriptAgent.enabled) {\n    faro.api.pushMeasurement({\n      type,\n      values,\n      context,\n    });\n  }\n}\n\n/**\n * Creates a monitoring logger with four levels of logging methods: `logDebug`, `logInfo`, `logWarning`, and `logError`.\n * These methods use `faro.api.pushX` web SDK methods to report these logs or errors to the Faro collector.\n *\n * @param {string} source - Identifier for the source of the log messages.\n * @param {LogContext} [defaultContext] - Context to be included in every log message.\n *\n * @returns {Object} Logger object with four methods:\n * - `logDebug(message: string, contexts?: LogContext)`: Logs a debug message.\n * - `logInfo(message: string, contexts?: LogContext)`: Logs an informational message.\n * - `logWarning(message: string, contexts?: LogContext)`: Logs a warning message.\n * - `logError(error: Error, contexts?: LogContext)`: Logs an error message.\n * - `logMeasurement(measurement: Omit<MeasurementEvent, 'timestamp'>, contexts?: LogContext)`: Logs a measurement.\n * Each method combines the `defaultContext` (if provided), the `source`, and an optional `LogContext` parameter into a full context that is included with the log message.\n */\nexport function createMonitoringLogger(source: string, defaultContext?: LogContext) {\n  const createFullContext = (contexts?: LogContext) => ({\n    source: source,\n    ...defaultContext,\n    ...contexts,\n  });\n\n  return {\n    /**\n     * Logs a debug message with optional additional context.\n     * @param {string} message - The debug message to be logged.\n     * @param {LogContext} [contexts] - Optional additional context to be included.\n     */\n    logDebug: (message: string, contexts?: LogContext) => logDebug(message, createFullContext(contexts)),\n\n    /**\n     * Logs an informational message with optional additional context.\n     * @param {string} message - The informational message to be logged.\n     * @param {LogContext} [contexts] - Optional additional context to be included.\n     */\n    logInfo: (message: string, contexts?: LogContext) => logInfo(message, createFullContext(contexts)),\n\n    /**\n     * Logs a warning message with optional additional context.\n     * @param {string} message - The warning message to be logged.\n     * @param {LogContext} [contexts] - Optional additional context to be included.\n     */\n    logWarning: (message: string, contexts?: LogContext) => logWarning(message, createFullContext(contexts)),\n\n    /**\n     * Logs an error with optional additional context.\n     * @param {Error} error - The error object to be logged.\n     * @param {LogContext} [contexts] - Optional additional context to be included.\n     */\n    logError: (error: Error, contexts?: LogContext) => logError(error, createFullContext(contexts)),\n\n    /**\n     * Logs an measurement with optional additional context.\n     * @param {MeasurementEvent} measurement - The measurement object to be recorded.\n     * @param {LogContext} [contexts] - Optional additional context to be included.\n     */\n    logMeasurement: (type: string, measurement: MeasurementValues, contexts?: LogContext) =>\n      logMeasurement(type, measurement, createFullContext(contexts)),\n  };\n}\n","import { DataQueryError } from '@grafana/data';\n\n/**\n * Convert an object into a DataQueryError -- if this is an HTTP response,\n * it will put the correct values in the error field\n *\n * @public\n */\nexport function toDataQueryError(err: DataQueryError | string | unknown): DataQueryError {\n  const error: DataQueryError = err || {};\n\n  if (!error.message) {\n    if (typeof err === 'string') {\n      return { message: err };\n    }\n\n    let message = 'Query error';\n    if (error.message) {\n      message = error.message;\n    } else if (error.data && error.data.message && error.data?.message !== 'Query data error') {\n      message = error.data.message;\n    } else if (error?.data?.message === 'Query data error' && error?.data?.error) {\n      message = error.data.error;\n    } else if (error.data && error.data.error) {\n      message = error.data.error;\n    } else if (error.status) {\n      message = `Query error: ${error.status} ${error.statusText}`;\n    }\n    error.message = message;\n  }\n\n  return error;\n}\n","import {\n  DataQueryResponse,\n  KeyValue,\n  LoadingState,\n  DataQueryError,\n  TimeSeries,\n  TableData,\n  toDataFrame,\n  DataFrame,\n  MetricFindValue,\n  FieldType,\n  DataQuery,\n  DataFrameJSON,\n  dataFrameFromJSON,\n  QueryResultMetaNotice,\n} from '@grafana/data';\n\nimport { FetchError, FetchResponse } from '../services';\n\nimport { HealthCheckResultDetails } from './DataSourceWithBackend';\nimport { toDataQueryError } from './toDataQueryError';\n\nexport const cachedResponseNotice: QueryResultMetaNotice = { severity: 'info', text: 'Cached response' };\n\n/**\n * Single response object from a backend data source. Properties are optional but response should contain at least\n * an error or a some data (but can contain both). Main way to send data is with dataframes attribute as series and\n * tables data attributes are legacy formats.\n *\n * @internal\n */\nexport interface DataResponse {\n  error?: string;\n  refId?: string;\n  frames?: DataFrameJSON[];\n  status?: number;\n\n  // Legacy TSDB format...\n  series?: TimeSeries[];\n  tables?: TableData[];\n}\n\n/**\n * This is the type of response expected form backend datasource.\n *\n * @internal\n */\nexport interface BackendDataSourceResponse {\n  results: KeyValue<DataResponse>;\n}\n\n/**\n * Parse the results from /api/ds/query into a DataQueryResponse\n *\n * @param res - the HTTP response data.\n * @param queries - optional DataQuery array that will order the response based on the order of query refId's.\n *\n * @public\n */\nexport function toDataQueryResponse(\n  res:\n    | { data: BackendDataSourceResponse | undefined }\n    | FetchResponse<BackendDataSourceResponse | undefined>\n    | DataQueryError,\n  queries?: DataQuery[]\n): DataQueryResponse {\n  const rsp: DataQueryResponse = { data: [], state: LoadingState.Done };\n\n  const traceId = 'traceId' in res ? res.traceId : undefined;\n\n  if (traceId != null) {\n    rsp.traceIds = [traceId];\n  }\n\n  // If the response isn't in a correct shape we just ignore the data and pass empty DataQueryResponse.\n  const fetchResponse = res as FetchResponse;\n  if (fetchResponse.data?.results) {\n    const results = fetchResponse.data.results;\n    const refIDs = queries?.length ? queries.map((q) => q.refId) : Object.keys(results);\n    const cachedResponse = isCachedResponse(fetchResponse);\n    const data: DataResponse[] = [];\n\n    for (const refId of refIDs) {\n      const dr = results[refId];\n      if (!dr) {\n        continue;\n      }\n      dr.refId = refId;\n      data.push(dr);\n    }\n\n    for (const dr of data) {\n      if (dr.error) {\n        const errorObj: DataQueryError = {\n          refId: dr.refId,\n          message: dr.error,\n          status: dr.status,\n        };\n        if (traceId != null) {\n          errorObj.traceId = traceId;\n        }\n        if (!rsp.error) {\n          rsp.error = { ...errorObj };\n        }\n        if (rsp.errors) {\n          rsp.errors.push({ ...errorObj });\n        } else {\n          rsp.errors = [{ ...errorObj }];\n        }\n        rsp.state = LoadingState.Error;\n      }\n\n      if (dr.frames?.length) {\n        for (let js of dr.frames) {\n          if (cachedResponse) {\n            js = addCacheNotice(js);\n          }\n          const df = dataFrameFromJSON(js);\n          if (!df.refId) {\n            df.refId = dr.refId;\n          }\n          rsp.data.push(df);\n        }\n        continue; // the other tests are legacy\n      }\n\n      if (dr.series?.length) {\n        for (const s of dr.series) {\n          if (!s.refId) {\n            s.refId = dr.refId;\n          }\n          rsp.data.push(toDataFrame(s));\n        }\n      }\n\n      if (dr.tables?.length) {\n        for (const s of dr.tables) {\n          if (!s.refId) {\n            s.refId = dr.refId;\n          }\n          rsp.data.push(toDataFrame(s));\n        }\n      }\n    }\n  }\n\n  // When it is not an OK response, make sure the error gets added\n  if (fetchResponse.status && fetchResponse.status !== 200) {\n    if (rsp.state !== LoadingState.Error) {\n      rsp.state = LoadingState.Error;\n    }\n    if (!rsp.error) {\n      rsp.error = toDataQueryError(res);\n    }\n  }\n\n  return rsp;\n}\n\nfunction isCachedResponse(res: FetchResponse<BackendDataSourceResponse | undefined>): boolean {\n  const headers = res?.headers;\n  if (!headers || !headers.get) {\n    return false;\n  }\n  return headers.get('X-Cache') === 'HIT';\n}\n\nfunction addCacheNotice(frame: DataFrameJSON): DataFrameJSON {\n  return {\n    ...frame,\n    schema: {\n      ...frame.schema,\n      fields: [...(frame.schema?.fields ?? [])],\n      meta: {\n        ...frame.schema?.meta,\n        notices: [...(frame.schema?.meta?.notices ?? []), cachedResponseNotice],\n        isCachedResponse: true,\n      },\n    },\n  };\n}\n\nexport interface TestingStatus {\n  message?: string | null;\n  status?: string | null;\n  details?: HealthCheckResultDetails;\n}\n\n/**\n * Data sources using api/ds/query to test data sources can use this function to\n * handle errors and convert them to TestingStatus object.\n *\n * If possible, this should be avoided in favor of implementing /health endpoint\n * and testing data source with DataSourceWithBackend.testDataSource()\n *\n * Re-thrown errors are handled by testDataSource() in public/app/features/datasources/state/actions.ts\n *\n * @returns {TestingStatus}\n */\nexport function toTestingStatus(err: FetchError): TestingStatus {\n  const queryResponse = toDataQueryResponse(err);\n  // POST api/ds/query errors returned as { message: string, error: string } objects\n  if (queryResponse.error?.data?.message) {\n    return {\n      status: 'error',\n      message: queryResponse.error.data.message,\n      details: queryResponse.error?.data?.error ? { message: queryResponse.error.data.error } : undefined,\n    };\n  }\n  // POST api/ds/query errors returned in results object\n  else if (queryResponse.error?.refId && queryResponse.error?.message) {\n    return {\n      status: 'error',\n      message: queryResponse.error.message,\n    };\n  }\n\n  throw err;\n}\n\n/**\n * Return the first string or non-time field as the value\n *\n * @beta\n */\nexport function frameToMetricFindValue(frame: DataFrame): MetricFindValue[] {\n  if (!frame || !frame.length) {\n    return [];\n  }\n\n  const values: MetricFindValue[] = [];\n  let field = frame.fields.find((f) => f.type === FieldType.string);\n  if (!field) {\n    field = frame.fields.find((f) => f.type !== FieldType.time);\n  }\n  if (field) {\n    for (let i = 0; i < field.values.length; i++) {\n      values.push({ text: '' + field.values[i] });\n    }\n  }\n  return values;\n}\n","import { catchError, Observable, of, switchMap } from 'rxjs';\n\nimport { DataQuery, DataQueryRequest, DataQueryResponse } from '@grafana/data';\n\nimport { config } from '../config';\nimport { getBackendSrv } from '../services/backendSrv';\n\nimport { BackendDataSourceResponse, toDataQueryResponse } from './queryResponse';\n\nexport function publicDashboardQueryHandler(request: DataQueryRequest<DataQuery>): Observable<DataQueryResponse> {\n  const {\n    intervalMs,\n    maxDataPoints,\n    requestId,\n    panelId,\n    queryCachingTTL,\n    range: { from: fromRange, to: toRange },\n  } = request;\n  // Return early if no queries exist\n  if (!request.targets.length) {\n    return of({ data: [] });\n  }\n\n  const body = {\n    intervalMs,\n    maxDataPoints,\n    queryCachingTTL,\n    timeRange: {\n      from: fromRange.valueOf().toString(),\n      to: toRange.valueOf().toString(),\n      timezone: request.timezone,\n    },\n  };\n\n  return getBackendSrv()\n    .fetch<BackendDataSourceResponse>({\n      url: `/api/public/dashboards/${config.publicDashboardAccessToken!}/panels/${panelId}/query`,\n      method: 'POST',\n      data: body,\n      requestId,\n    })\n    .pipe(\n      switchMap((raw) => {\n        return of(toDataQueryResponse(raw, request.targets));\n      }),\n      catchError((err) => {\n        return of(toDataQueryResponse(err));\n      })\n    );\n}\n","import { lastValueFrom, merge, Observable, of } from 'rxjs';\nimport { catchError, switchMap } from 'rxjs/operators';\n\nimport {\n  DataFrame,\n  dataFrameToJSON,\n  DataQuery,\n  DataQueryRequest,\n  DataQueryResponse,\n  TestDataSourceResponse,\n  DataSourceApi,\n  DataSourceInstanceSettings,\n  DataSourceJsonData,\n  DataSourceRef,\n  getDataSourceRef,\n  makeClassES5Compatible,\n  parseLiveChannelAddress,\n  ScopedVars,\n  AdHocVariableFilter,\n} from '@grafana/data';\n\nimport { config } from '../config';\nimport {\n  BackendSrvRequest,\n  FetchResponse,\n  getBackendSrv,\n  getDataSourceSrv,\n  getGrafanaLiveSrv,\n  StreamingFrameAction,\n  StreamingFrameOptions,\n} from '../services';\n\nimport { publicDashboardQueryHandler } from './publicDashboardQueryHandler';\nimport { BackendDataSourceResponse, toDataQueryResponse } from './queryResponse';\n\n/**\n * @internal\n */\nexport const ExpressionDatasourceRef = Object.freeze({\n  type: '__expr__',\n  uid: '__expr__',\n  name: 'Expression',\n});\n\n/**\n * @public\n */\nexport function isExpressionReference(ref?: DataSourceRef | string | null): boolean {\n  if (!ref) {\n    return false;\n  }\n  const v = typeof ref === 'string' ? ref : ref.type;\n  return v === ExpressionDatasourceRef.type || v === ExpressionDatasourceRef.name || v === '-100'; // -100 was a legacy accident that should be removed\n}\n\nexport class HealthCheckError extends Error {\n  details: HealthCheckResultDetails;\n\n  constructor(message: string, details: HealthCheckResultDetails) {\n    super(message);\n    this.details = details;\n    this.name = 'HealthCheckError';\n  }\n}\n\n/**\n * Describes the current health status of a data source plugin.\n *\n * @public\n */\nexport enum HealthStatus {\n  Unknown = 'UNKNOWN',\n  OK = 'OK',\n  Error = 'ERROR',\n}\n\n// Internal for now\nenum PluginRequestHeaders {\n  PluginID = 'X-Plugin-Id', // can be used for routing\n  DatasourceUID = 'X-Datasource-Uid', // can be used for routing/ load balancing\n  DashboardUID = 'X-Dashboard-Uid', // mainly useful for debugging slow queries\n  PanelID = 'X-Panel-Id', // mainly useful for debugging slow queries\n  PanelPluginId = 'X-Panel-Plugin-Id',\n  QueryGroupID = 'X-Query-Group-Id', // mainly useful to find related queries with query splitting\n  FromExpression = 'X-Grafana-From-Expr', // used by datasources to identify expression queries\n  SkipQueryCache = 'X-Cache-Skip', // used by datasources to skip the query cache\n}\n\n/**\n * Describes the details in the payload returned when checking the health of a data source\n * plugin.\n *\n * If the 'message' key exists, this will be displayed in the error message in DataSourceSettingsPage\n * If the 'verboseMessage' key exists, this will be displayed in the expandable details in the error message in DataSourceSettingsPage\n *\n * @public\n */\nexport type HealthCheckResultDetails = Record<string, unknown> | undefined;\n\n/**\n * Describes the payload returned when checking the health of a data source\n * plugin.\n *\n * @public\n */\nexport interface HealthCheckResult {\n  status: HealthStatus;\n  message: string;\n  details: HealthCheckResultDetails;\n}\n\n/**\n * Extend this class to implement a data source plugin that is depending on the Grafana\n * backend API.\n *\n * @public\n */\nclass DataSourceWithBackend<\n  TQuery extends DataQuery = DataQuery,\n  TOptions extends DataSourceJsonData = DataSourceJsonData,\n> extends DataSourceApi<TQuery, TOptions> {\n  constructor(instanceSettings: DataSourceInstanceSettings<TOptions>) {\n    super(instanceSettings);\n  }\n\n  /**\n   * Ideally final -- any other implementation may not work as expected\n   */\n  query(request: DataQueryRequest<TQuery>): Observable<DataQueryResponse> {\n    if (config.publicDashboardAccessToken) {\n      return publicDashboardQueryHandler(request);\n    }\n\n    const { intervalMs, maxDataPoints, queryCachingTTL, range, requestId, hideFromInspector = false } = request;\n    let targets = request.targets;\n\n    let hasExpr = false;\n    const pluginIDs = new Set<string>();\n    const dsUIDs = new Set<string>();\n    const queries: DataQuery[] = targets.map((q) => {\n      let datasource = this.getRef();\n      let datasourceId = this.id;\n      let shouldApplyTemplateVariables = true;\n\n      if (isExpressionReference(q.datasource)) {\n        hasExpr = true;\n        return {\n          ...q,\n          datasource: ExpressionDatasourceRef,\n        };\n      }\n\n      if (q.datasource) {\n        const ds = getDataSourceSrv().getInstanceSettings(q.datasource, request.scopedVars);\n\n        if (!ds) {\n          throw new Error(`Unknown Datasource: ${JSON.stringify(q.datasource)}`);\n        }\n\n        const dsRef = ds.rawRef ?? getDataSourceRef(ds);\n        const dsId = ds.id;\n        if (dsRef.uid !== datasource.uid || datasourceId !== dsId) {\n          datasource = dsRef;\n          datasourceId = dsId;\n          // If the query is using a different datasource, we would need to retrieve the datasource\n          // instance (async) and apply the template variables but it seems it's not necessary for now.\n          shouldApplyTemplateVariables = false;\n        }\n      }\n      if (datasource.type?.length) {\n        pluginIDs.add(datasource.type);\n      }\n      if (datasource.uid?.length) {\n        dsUIDs.add(datasource.uid);\n      }\n      return {\n        ...(shouldApplyTemplateVariables ? this.applyTemplateVariables(q, request.scopedVars, request.filters) : q),\n        datasource,\n        datasourceId, // deprecated!\n        intervalMs,\n        maxDataPoints,\n        queryCachingTTL,\n      };\n    });\n\n    // Return early if no queries exist\n    if (!queries.length) {\n      return of({ data: [] });\n    }\n\n    const body = {\n      queries,\n      from: range?.from.valueOf().toString(),\n      to: range?.to.valueOf().toString(),\n    };\n\n    if (config.featureToggles.queryOverLive) {\n      return getGrafanaLiveSrv().getQueryData({\n        request,\n        body,\n      });\n    }\n\n    const headers: Record<string, string> = {};\n    headers[PluginRequestHeaders.PluginID] = Array.from(pluginIDs).join(', ');\n    headers[PluginRequestHeaders.DatasourceUID] = Array.from(dsUIDs).join(', ');\n\n    let url = '/api/ds/query?ds_type=' + this.type;\n\n    // Use the new query service\n    if (config.featureToggles.queryServiceFromUI) {\n      if (!(config.featureToggles.queryService || config.featureToggles.grafanaAPIServerWithExperimentalAPIs)) {\n        console.warn('feature toggle queryServiceFromUI also requires the queryService to be running');\n      } else {\n        if (!hasExpr && dsUIDs.size === 1) {\n          // TODO? can we talk directly to the apiserver?\n        }\n        url = `/apis/query.grafana.app/v0alpha1/namespaces/${config.namespace}/query?ds_type=' + this.type`;\n      }\n    }\n\n    if (hasExpr) {\n      headers[PluginRequestHeaders.FromExpression] = 'true';\n      url += '&expression=true';\n    }\n\n    // Appending request ID to url to facilitate client-side performance metrics. See #65244 for more context.\n    if (requestId) {\n      url += `&requestId=${requestId}`;\n    }\n\n    if (request.dashboardUID) {\n      headers[PluginRequestHeaders.DashboardUID] = request.dashboardUID;\n    }\n    if (request.panelId) {\n      headers[PluginRequestHeaders.PanelID] = `${request.panelId}`;\n    }\n    if (request.panelPluginId) {\n      headers[PluginRequestHeaders.PanelPluginId] = `${request.panelPluginId}`;\n    }\n    if (request.queryGroupId) {\n      headers[PluginRequestHeaders.QueryGroupID] = `${request.queryGroupId}`;\n    }\n    if (request.skipQueryCache) {\n      headers[PluginRequestHeaders.SkipQueryCache] = 'true';\n    }\n    return getBackendSrv()\n      .fetch<BackendDataSourceResponse>({\n        url,\n        method: 'POST',\n        data: body,\n        requestId,\n        hideFromInspector,\n        headers,\n      })\n      .pipe(\n        switchMap((raw) => {\n          const rsp = toDataQueryResponse(raw, queries);\n          // Check if any response should subscribe to a live stream\n          if (rsp.data?.length && rsp.data.find((f: DataFrame) => f.meta?.channel)) {\n            return toStreamingDataResponse(rsp, request, this.streamOptionsProvider);\n          }\n          return of(rsp);\n        }),\n        catchError((err) => {\n          return of(toDataQueryResponse(err));\n        })\n      );\n  }\n\n  /** Get request headers with plugin ID+UID set */\n  protected getRequestHeaders(): Record<string, string> {\n    const headers: Record<string, string> = {};\n    headers[PluginRequestHeaders.PluginID] = this.type;\n    headers[PluginRequestHeaders.DatasourceUID] = this.uid;\n    return headers;\n  }\n\n  /**\n   * Apply template variables for explore\n   */\n  interpolateVariablesInQueries(queries: TQuery[], scopedVars: ScopedVars, filters?: AdHocVariableFilter[]): TQuery[] {\n    return queries.map((q) => this.applyTemplateVariables(q, scopedVars, filters));\n  }\n\n  /**\n   * Override to apply template variables and adhoc filters.  The result is usually also `TQuery`, but sometimes this can\n   * be used to modify the query structure before sending to the backend.\n   *\n   * NOTE: if you do modify the structure or use template variables, alerting queries may not work\n   * as expected\n   *\n   * @virtual\n   */\n  applyTemplateVariables(query: TQuery, scopedVars: ScopedVars, filters?: AdHocVariableFilter[]) {\n    return query;\n  }\n\n  /**\n   * Optionally override the streaming behavior\n   */\n  streamOptionsProvider: StreamOptionsProvider<TQuery> = standardStreamOptionsProvider;\n\n  /**\n   * Make a GET request to the datasource resource path\n   */\n  async getResource<T = any>(\n    path: string,\n    params?: BackendSrvRequest['params'],\n    options?: Partial<BackendSrvRequest>\n  ): Promise<T> {\n    const headers = this.getRequestHeaders();\n    const result = await lastValueFrom(\n      getBackendSrv().fetch<T>({\n        ...options,\n        method: 'GET',\n        headers: options?.headers ? { ...options.headers, ...headers } : headers,\n        params: params ?? options?.params,\n        url: `/api/datasources/uid/${this.uid}/resources/${path}`,\n      })\n    );\n    return result.data;\n  }\n\n  /**\n   * Send a POST request to the datasource resource path\n   */\n  async postResource<T = unknown>(\n    path: string,\n    data?: BackendSrvRequest['data'],\n    options?: Partial<BackendSrvRequest>\n  ): Promise<T> {\n    const headers = this.getRequestHeaders();\n    const result = await lastValueFrom(\n      getBackendSrv().fetch<T>({\n        ...options,\n        method: 'POST',\n        headers: options?.headers ? { ...options.headers, ...headers } : headers,\n        data: data ?? { ...data },\n        url: `/api/datasources/uid/${this.uid}/resources/${path}`,\n      })\n    );\n    return result.data;\n  }\n\n  /**\n   * Run the datasource healthcheck\n   */\n  async callHealthCheck(): Promise<HealthCheckResult> {\n    return lastValueFrom(\n      getBackendSrv().fetch<HealthCheckResult>({\n        method: 'GET',\n        url: `/api/datasources/uid/${this.uid}/health`,\n        showErrorAlert: false,\n        headers: this.getRequestHeaders(),\n      })\n    )\n      .then((v: FetchResponse) => v.data)\n      .catch((err) => err.data);\n  }\n\n  /**\n   * Checks the plugin health\n   * see public/app/features/datasources/state/actions.ts for what needs to be returned here\n   */\n  async testDatasource(): Promise<TestDataSourceResponse> {\n    return this.callHealthCheck().then((res) => {\n      if (res.status === HealthStatus.OK) {\n        return {\n          status: 'success',\n          message: res.message,\n        };\n      }\n\n      return Promise.reject({\n        status: 'error',\n        message: res.message,\n        error: new HealthCheckError(res.message, res.details),\n      });\n    });\n  }\n}\n\n/**\n * @internal exported for tests\n */\nexport function toStreamingDataResponse<TQuery extends DataQuery = DataQuery>(\n  rsp: DataQueryResponse,\n  req: DataQueryRequest<TQuery>,\n  getter: (req: DataQueryRequest<TQuery>, frame: DataFrame) => Partial<StreamingFrameOptions>\n): Observable<DataQueryResponse> {\n  const live = getGrafanaLiveSrv();\n  if (!live) {\n    return of(rsp); // add warning?\n  }\n\n  const staticdata: DataFrame[] = [];\n  const streams: Array<Observable<DataQueryResponse>> = [];\n  for (const f of rsp.data) {\n    const addr = parseLiveChannelAddress(f.meta?.channel);\n    if (addr) {\n      const frame: DataFrame = f;\n      streams.push(\n        live.getDataStream({\n          addr,\n          buffer: getter(req, frame),\n          frame: dataFrameToJSON(f),\n        })\n      );\n    } else {\n      staticdata.push(f);\n    }\n  }\n  if (staticdata.length) {\n    streams.push(of({ ...rsp, data: staticdata }));\n  }\n  if (streams.length === 1) {\n    return streams[0]; // avoid merge wrapper\n  }\n  return merge(...streams);\n}\n\n/**\n * This allows data sources to customize the streaming connection query\n *\n * @public\n */\nexport type StreamOptionsProvider<TQuery extends DataQuery = DataQuery> = (\n  request: DataQueryRequest<TQuery>,\n  frame: DataFrame\n) => Partial<StreamingFrameOptions>;\n\n/**\n * @public\n */\nexport const standardStreamOptionsProvider: StreamOptionsProvider = (request: DataQueryRequest, frame: DataFrame) => {\n  const opts: Partial<StreamingFrameOptions> = {\n    maxLength: request.maxDataPoints ?? 500,\n    action: StreamingFrameAction.Append,\n  };\n\n  // For recent queries, clamp to the current time range\n  if (request.rangeRaw?.to === 'now') {\n    opts.maxDelta = request.range.to.valueOf() - request.range.from.valueOf();\n  }\n  return opts;\n};\n\n//@ts-ignore\nDataSourceWithBackend = makeClassES5Compatible(DataSourceWithBackend);\n\nexport { DataSourceWithBackend };\n","import React from 'react';\n\nimport { AbsoluteTimeRange, FieldConfigSource, PanelData } from '@grafana/data';\n\n/**\n * Describes the properties that can be passed to the PanelRenderer.\n *\n * @typeParam P - Panel options type for the panel being rendered.\n * @typeParam F - Field options type for the panel being rendered.\n *\n * @internal\n */\nexport interface PanelRendererProps<P extends object = {}, F extends object = {}> {\n  data?: PanelData;\n  pluginId: string;\n  title: string;\n  options?: Partial<P>;\n  onOptionsChange?: (options: P) => void;\n  onFieldConfigChange?: (config: FieldConfigSource<F>) => void;\n  onChangeTimeRange?: (timeRange: AbsoluteTimeRange) => void;\n  fieldConfig?: FieldConfigSource<Partial<F>>;\n  timeZone?: string;\n  width: number;\n  height: number;\n}\n\n/**\n * Simplified type with defaults that describes the PanelRenderer.\n *\n * @internal\n */\nexport type PanelRendererType<P extends object = {}, F extends object = {}> = React.ComponentType<\n  PanelRendererProps<P, F>\n>;\n\n/**\n * PanelRenderer component that will be set via the {@link setPanelRenderer} function\n * when Grafana starts. The implementation being used during runtime lives in Grafana\n * core.\n *\n * @internal\n */\nexport let PanelRenderer: PanelRendererType = () => {\n  return <div>PanelRenderer can only be used after Grafana instance has been started.</div>;\n};\n\n/**\n * Used to bootstrap the PanelRenderer during application start so the PanelRenderer\n * is exposed via runtime.\n *\n * @internal\n */\nexport function setPanelRenderer(renderer: PanelRendererType) {\n  PanelRenderer = renderer;\n}\n","import React from 'react';\n\nimport { FieldConfigSource, PanelData, VisualizationSuggestion } from '@grafana/data';\n\n/**\n * Describes the properties that can be passed to the PanelDataErrorView.\n *\n * @alpha\n */\nexport interface PanelDataErrorViewProps {\n  message?: string;\n  panelId: number;\n  data: PanelData;\n  fieldConfig?: FieldConfigSource;\n  needsTimeField?: boolean;\n  needsNumberField?: boolean;\n  needsStringField?: boolean;\n  suggestions?: VisualizationSuggestion[];\n}\n\n/**\n * Simplified type with defaults that describes the PanelDataErrorView.\n *\n * @internal\n */\nexport type PanelDataErrorViewType = React.ComponentType<PanelDataErrorViewProps>;\n\n/**\n * PanelDataErrorView allows panels to show a consistent error message when\n * the result structure does not meet expected criteria\n *\n * @alpha\n */\nexport let PanelDataErrorView: PanelDataErrorViewType = ({ message }) => {\n  return <div>Unable to render data: {message}.</div>;\n};\n\n/**\n * Used to bootstrap the PanelDataErrorView during application start so the\n * PanelDataErrorView is exposed via runtime.\n *\n * @internal\n */\nexport function setPanelDataErrorView(renderer: PanelDataErrorViewType) {\n  PanelDataErrorView = renderer;\n}\n","import { Observable } from 'rxjs';\n\nimport { DataQueryRequest, DataSourceApi, PanelData, QueryRunner } from '@grafana/data';\n\nlet factory: QueryRunnerFactory | undefined;\n\n/**\n * @internal\n */\nexport type QueryRunnerFactory = () => QueryRunner;\n\n/**\n * Used to bootstrap the {@link createQueryRunner} during application start.\n *\n * @internal\n */\nexport const setQueryRunnerFactory = (instance: QueryRunnerFactory): void => {\n  if (factory) {\n    throw new Error('Runner should only be set when Grafana is starting.');\n  }\n  factory = instance;\n};\n\n/**\n * Used to create QueryRunner instances from outside the core Grafana application.\n * This is helpful to be able to create a QueryRunner to execute queries in e.g. an app plugin.\n *\n * @internal\n */\nexport const createQueryRunner = (): QueryRunner => {\n  if (!factory) {\n    throw new Error('`createQueryRunner` can only be used after Grafana instance has started.');\n  }\n  return factory();\n};\n\ntype RunRequestFn = (\n  datasource: DataSourceApi,\n  request: DataQueryRequest,\n  queryFunction?: typeof datasource.query\n) => Observable<PanelData>;\n\nlet runRequest: RunRequestFn | undefined;\n\n/**\n * Used to exspose runRequest implementation to libraries, i.e. @grafana/scenes\n *\n * @internal\n */\nexport function setRunRequest(fn: RunRequestFn): void {\n  if (runRequest && process.env.NODE_ENV !== 'test') {\n    throw new Error('runRequest function should only be set once, when Grafana is starting.');\n  }\n  runRequest = fn;\n}\n\nexport function getRunRequest(): RunRequestFn {\n  if (!runRequest) {\n    throw new Error('getRunRequest can only be used after Grafana instance has started.');\n  }\n  return runRequest;\n}\n","import React from 'react';\n\nimport { NavModelItem, PageLayoutType } from '@grafana/data';\n\nexport interface PageInfoItem {\n  label: string;\n  value: React.ReactNode;\n}\n\nexport interface PluginPageProps {\n  /** Can be used to place actions inline with the heading */\n  info?: PageInfoItem[];\n  /** Can be used to place actions inline with the heading */\n  actions?: React.ReactNode;\n  /** Can be used to customize rendering of title */\n  renderTitle?: (title: string) => React.ReactNode;\n  /** Shown under main heading */\n  subTitle?: React.ReactNode;\n  pageNav?: NavModelItem;\n  children: React.ReactNode;\n  layout?: PageLayoutType;\n}\n\nexport type PluginPageType = React.ComponentType<PluginPageProps>;\n\nexport let PluginPage: PluginPageType = ({ children }) => {\n  return <div>{children}</div>;\n};\n\n/**\n * Used to bootstrap the PluginPage during application start\n * is exposed via runtime.\n *\n * @internal\n */\nexport function setPluginPage(component: PluginPageType) {\n  PluginPage = component;\n}\n","// Libraries\nimport React, { PureComponent } from 'react';\n\n// Components\nimport {\n  DataSourceInstanceSettings,\n  DataSourceRef,\n  getDataSourceUID,\n  isUnsignedPluginSignature,\n  SelectableValue,\n} from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { ActionMeta, PluginSignatureBadge, Select, Stack } from '@grafana/ui';\n\nimport { getDataSourceSrv } from '../services/dataSourceSrv';\n\nimport { ExpressionDatasourceRef } from './../utils/DataSourceWithBackend';\n\n/**\n * Component props description for the {@link DataSourcePicker}\n *\n * @internal\n */\nexport interface DataSourcePickerProps {\n  onChange: (ds: DataSourceInstanceSettings) => void;\n  current: DataSourceRef | string | null; // uid\n  hideTextValue?: boolean;\n  onBlur?: () => void;\n  autoFocus?: boolean;\n  openMenuOnFocus?: boolean;\n  placeholder?: string;\n  tracing?: boolean;\n  mixed?: boolean;\n  dashboard?: boolean;\n  metrics?: boolean;\n  type?: string | string[];\n  annotations?: boolean;\n  variables?: boolean;\n  alerting?: boolean;\n  pluginId?: string;\n  /** If true,we show only DSs with logs; and if true, pluginId shouldnt be passed in */\n  logs?: boolean;\n  // If set to true and there is no value select will be empty, otherwise it will preselect default data source\n  noDefault?: boolean;\n  width?: number;\n  inputId?: string;\n  filter?: (dataSource: DataSourceInstanceSettings) => boolean;\n  onClear?: () => void;\n  invalid?: boolean;\n  disabled?: boolean;\n  isLoading?: boolean;\n}\n\n/**\n * Component state description for the {@link DataSourcePicker}\n *\n * @internal\n */\nexport interface DataSourcePickerState {\n  error?: string;\n}\n\n/**\n * Component to be able to select a datasource from the list of installed and enabled\n * datasources in the current Grafana instance.\n *\n * @internal\n */\nexport class DataSourcePicker extends PureComponent<DataSourcePickerProps, DataSourcePickerState> {\n  dataSourceSrv = getDataSourceSrv();\n\n  static defaultProps: Partial<DataSourcePickerProps> = {\n    autoFocus: false,\n    openMenuOnFocus: false,\n    placeholder: 'Select data source',\n  };\n\n  state: DataSourcePickerState = {};\n\n  constructor(props: DataSourcePickerProps) {\n    super(props);\n  }\n\n  componentDidMount() {\n    const { current } = this.props;\n    const dsSettings = this.dataSourceSrv.getInstanceSettings(current);\n    if (!dsSettings) {\n      this.setState({ error: 'Could not find data source ' + current });\n    }\n  }\n\n  onChange = (item: SelectableValue<string>, actionMeta: ActionMeta) => {\n    if (actionMeta.action === 'clear' && this.props.onClear) {\n      this.props.onClear();\n      return;\n    }\n\n    const dsSettings = this.dataSourceSrv.getInstanceSettings(item.value);\n\n    if (dsSettings) {\n      this.props.onChange(dsSettings);\n      this.setState({ error: undefined });\n    }\n  };\n\n  private getCurrentValue(): SelectableValue<string> | undefined {\n    const { current, hideTextValue, noDefault } = this.props;\n    if (!current && noDefault) {\n      return;\n    }\n\n    const ds = this.dataSourceSrv.getInstanceSettings(current);\n\n    if (ds) {\n      return {\n        label: ds.name.slice(0, 37),\n        value: ds.uid,\n        imgUrl: ds.meta.info.logos.small,\n        hideText: hideTextValue,\n        meta: ds.meta,\n      };\n    }\n\n    const uid = getDataSourceUID(current);\n\n    if (uid === ExpressionDatasourceRef.uid || uid === ExpressionDatasourceRef.name) {\n      return { label: uid, value: uid, hideText: hideTextValue };\n    }\n\n    return {\n      label: (uid ?? 'no name') + ' - not found',\n      value: uid ?? undefined,\n      imgUrl: '',\n      hideText: hideTextValue,\n    };\n  }\n\n  getDataSourceOptions() {\n    const { alerting, tracing, metrics, mixed, dashboard, variables, annotations, pluginId, type, filter, logs } =\n      this.props;\n\n    const options = this.dataSourceSrv\n      .getList({\n        alerting,\n        tracing,\n        metrics,\n        logs,\n        dashboard,\n        mixed,\n        variables,\n        annotations,\n        pluginId,\n        filter,\n        type,\n      })\n      .map((ds) => ({\n        value: ds.name,\n        label: `${ds.name}${ds.isDefault ? ' (default)' : ''}`,\n        imgUrl: ds.meta.info.logos.small,\n        meta: ds.meta,\n      }));\n\n    return options;\n  }\n\n  render() {\n    const {\n      autoFocus,\n      onBlur,\n      onClear,\n      openMenuOnFocus,\n      placeholder,\n      width,\n      inputId,\n      disabled = false,\n      isLoading = false,\n    } = this.props;\n    const { error } = this.state;\n    const options = this.getDataSourceOptions();\n    const value = this.getCurrentValue();\n    const isClearable = typeof onClear === 'function';\n\n    return (\n      <div\n        aria-label=\"Data source picker select container\"\n        data-testid={selectors.components.DataSourcePicker.container}\n      >\n        <Select\n          isLoading={isLoading}\n          disabled={disabled}\n          aria-label={'Select a data source'}\n          data-testid={selectors.components.DataSourcePicker.inputV2}\n          inputId={inputId || 'data-source-picker'}\n          className=\"ds-picker select-container\"\n          isMulti={false}\n          isClearable={isClearable}\n          backspaceRemovesValue={false}\n          onChange={this.onChange}\n          options={options}\n          autoFocus={autoFocus}\n          onBlur={onBlur}\n          width={width}\n          openMenuOnFocus={openMenuOnFocus}\n          maxMenuHeight={500}\n          placeholder={placeholder}\n          noOptionsMessage=\"No datasources found\"\n          value={value ?? null}\n          invalid={Boolean(error) || Boolean(this.props.invalid)}\n          getOptionLabel={(o) => {\n            if (o.meta && isUnsignedPluginSignature(o.meta.signature) && o !== value) {\n              return (\n                <Stack alignItems=\"center\" justifyContent=\"space-between\">\n                  <span>{o.label}</span> <PluginSignatureBadge status={o.meta.signature} />\n                </Stack>\n              );\n            }\n            return o.label || '';\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import { DataSourceInstanceSettings, PluginMeta } from '@grafana/data';\n\nimport { config } from '../../config';\n\nexport type PluginEventProperties = {\n  grafana_version: string;\n  plugin_type: string;\n  plugin_version: string;\n  plugin_id: string;\n  plugin_name: string;\n};\n\nexport function createPluginEventProperties(meta: PluginMeta): PluginEventProperties {\n  return {\n    grafana_version: config.buildInfo.version,\n    plugin_type: String(meta.type),\n    plugin_version: meta.info.version,\n    plugin_id: meta.id,\n    plugin_name: meta.name,\n  };\n}\n\nexport type DataSourcePluginEventProperties = PluginEventProperties & {\n  datasource_uid: string;\n};\n\nexport function createDataSourcePluginEventProperties(\n  instanceSettings: DataSourceInstanceSettings\n): DataSourcePluginEventProperties {\n  return {\n    ...createPluginEventProperties(instanceSettings.meta),\n    datasource_uid: instanceSettings.uid,\n  };\n}\n","import { useMemo } from 'react';\n\nimport { isDataSourcePluginContext, usePluginContext } from '@grafana/data';\n\nimport { reportInteraction } from '../utils';\n\nimport { createDataSourcePluginEventProperties, createPluginEventProperties } from './eventProperties';\n\nconst namePrefix = 'grafana_plugin_';\n\nexport function usePluginInteractionReporter(): typeof reportInteraction {\n  const context = usePluginContext();\n\n  return useMemo(() => {\n    const info = isDataSourcePluginContext(context)\n      ? createDataSourcePluginEventProperties(context.instanceSettings)\n      : createPluginEventProperties(context.meta);\n\n    return (interactionName: string, properties?: Record<string, unknown>) => {\n      if (!validInteractionName(interactionName)) {\n        throw new Error(`Interactions reported in plugins should start with: \"${namePrefix}\".`);\n      }\n      return reportInteraction(interactionName, { ...properties, ...info });\n    };\n  }, [context]);\n}\n\nfunction validInteractionName(interactionName: string): boolean {\n  return interactionName.startsWith(namePrefix) && interactionName.length > namePrefix.length;\n}\n","type ReturnToPreviousHook = () => (title: string, href?: string) => void;\n\nlet rtpHook: ReturnToPreviousHook | undefined = undefined;\n\nexport const setReturnToPreviousHook = (hook: ReturnToPreviousHook) => {\n  rtpHook = hook;\n};\n\n/**\n * Guidelines:\n * - Only use the ‘Return to previous’ functionality when the user is sent to another context, such as from Alerting to a dashboard.\n * - Specify a button title that identifies the page to return to in the most understandable way. Do not use text such as ‘Back to the previous page’. Be specific.\n */\nexport const useReturnToPrevious: ReturnToPreviousHook = () => {\n  if (!rtpHook) {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error('useReturnToPrevious hook not found in @grafana/runtime');\n    }\n    return () => console.error('ReturnToPrevious hook not found');\n  }\n\n  return rtpHook();\n};\n","import React from 'react';\n\nexport interface EmbeddedDashboardProps {\n  uid?: string;\n  /**\n   * Use this property to override initial time and variable state.\n   * Example: ?from=now-5m&to=now&var-varname=value1\n   */\n  initialState?: string;\n  /**\n   * Is called when ever the internal embedded dashboards url state changes.\n   * Can be used to sync the internal url state (Which is not synced to URL) with the external context, or to\n   * preserve some of the state when moving to other embedded dashboards.\n   */\n  onStateChange?: (state: string) => void;\n}\n\n/**\n * Returns a React component that renders an embedded dashboard.\n * @alpha\n */\nexport let EmbeddedDashboard: React.ComponentType<EmbeddedDashboardProps> = () => {\n  throw new Error('EmbeddedDashboard requires runtime initialization');\n};\n\n/**\n *\n * @internal\n */\nexport function setEmbeddedDashboard(component: React.ComponentType<EmbeddedDashboardProps>) {\n  EmbeddedDashboard = component;\n}\n"],"names":["singletonInstance","EchoEventType","__publicField","singleton","options","merge","systemDateFormats","getThemeById","config","H","urlUtil","__spreadProps","__spreadValues","deprecationWarning","locationService","createLogger","attachDebugger","BusEventBase","BusEventWithPayload","PluginExtensionTypes","useMemo","MetaAnalyticsEventName","faro","LogLevel","LoadingState","data","dataFrameFromJSON","toDataFrame","FieldType","of","switchMap","catchError","HealthStatus","DataSourceApi","getDataSourceRef","_a","lastValueFrom","parseLiveChannelAddress","dataFrameToJSON","StreamingFrameAction","makeClassES5Compatible","React","PureComponent","getDataSourceUID","selectors","Select","isUnsignedPluginSignature","Stack","PluginSignatureBadge","usePluginContext","isDataSourcePluginContext","EmbeddedDashboard"],"mappings":"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"}