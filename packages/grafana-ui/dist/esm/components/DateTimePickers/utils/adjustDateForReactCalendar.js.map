{"version":3,"file":"adjustDateForReactCalendar.js","sources":["../../../../../src/components/DateTimePickers/utils/adjustDateForReactCalendar.ts"],"sourcesContent":["import { getZone } from '@grafana/data';\n\n/**\n * React calendar doesn't support showing dates in other time zones, so attempting to show\n * values near midnight in another time zone than your browsers may end up showing the wrong date\n *\n * This function adjusts a date by \"moving\" the time to appear as if it's local.\n * e.g. make 5 PM New York \"look like\" 5 PM in the user's local browser time.\n * See also https://github.com/wojtekmaj/react-calendar/issues/511#issuecomment-835333976\n */\nexport function adjustDateForReactCalendar(date: Date, timeZone: string): Date {\n  const zone = getZone(timeZone);\n  if (!zone) {\n    return date;\n  }\n\n  // get utc offset for timezone preference\n  const timezonePrefOffset = zone.utcOffset(date.getTime());\n\n  // get utc offset for local timezone\n  const localOffset = date.getTimezoneOffset();\n\n  // calculate difference between timezone preference and local timezone\n  const diff = timezonePrefOffset - localOffset;\n\n  const newDate = new Date(date.getTime() - diff * 1000 * 60);\n  return newDate;\n}\n"],"names":[],"mappings":";;AAUgB,SAAA,0BAAA,CAA2B,MAAY,QAAwB,EAAA;AAC7E,EAAM,MAAA,IAAA,GAAO,QAAQ,QAAQ,CAAA,CAAA;AAC7B,EAAA,IAAI,CAAC,IAAM,EAAA;AACT,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AAGA,EAAA,MAAM,kBAAqB,GAAA,IAAA,CAAK,SAAU,CAAA,IAAA,CAAK,SAAS,CAAA,CAAA;AAGxD,EAAM,MAAA,WAAA,GAAc,KAAK,iBAAkB,EAAA,CAAA;AAG3C,EAAA,MAAM,OAAO,kBAAqB,GAAA,WAAA,CAAA;AAElC,EAAM,MAAA,OAAA,GAAU,IAAI,IAAK,CAAA,IAAA,CAAK,SAAY,GAAA,IAAA,GAAO,MAAO,EAAE,CAAA,CAAA;AAC1D,EAAO,OAAA,OAAA,CAAA;AACT;;;;"}