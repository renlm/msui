{"version":3,"file":"utils.js","sources":["../../../../src/components/Sparkline/utils.ts"],"sourcesContent":["import {\n  DataFrame,\n  FieldConfig,\n  FieldSparkline,\n  FieldType,\n  isLikelyAscendingVector,\n  sortDataFrame,\n  applyNullInsertThreshold,\n} from '@grafana/data';\nimport { GraphFieldConfig } from '@grafana/schema';\n\n/** @internal\n * Given a sparkline config returns a DataFrame ready to be turned into Plot data set\n **/\nexport function preparePlotFrame(sparkline: FieldSparkline, config?: FieldConfig<GraphFieldConfig>): DataFrame {\n  const length = sparkline.y.values.length;\n  const yFieldConfig = {\n    ...sparkline.y.config,\n    ...config,\n  };\n\n  const xField = sparkline.x ?? {\n    name: '',\n    values: [...Array(length).keys()],\n    type: FieldType.number,\n    config: {},\n  };\n\n  let frame: DataFrame = {\n    refId: 'sparkline',\n    fields: [\n      xField,\n      {\n        ...sparkline.y,\n        config: yFieldConfig,\n      },\n    ],\n    length,\n  };\n\n  if (!isLikelyAscendingVector(xField.values)) {\n    frame = sortDataFrame(frame, 0);\n  }\n\n  return applyNullInsertThreshold({\n    frame,\n    refFieldPseudoMin: sparkline.timeRange?.from.valueOf(),\n    refFieldPseudoMax: sparkline.timeRange?.to.valueOf(),\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAcgB,SAAA,gBAAA,CAAiB,WAA2B,MAAmD,EAAA;AAd/G,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CAAA;AAeE,EAAM,MAAA,MAAA,GAAS,SAAU,CAAA,CAAA,CAAE,MAAO,CAAA,MAAA,CAAA;AAClC,EAAA,MAAM,YAAe,GAAA,cAAA,CAAA,cAAA,CAAA,EAAA,EAChB,SAAU,CAAA,CAAA,CAAE,MACZ,CAAA,EAAA,MAAA,CAAA,CAAA;AAGL,EAAM,MAAA,MAAA,GAAA,CAAS,EAAU,GAAA,SAAA,CAAA,CAAA,KAAV,IAAe,GAAA,EAAA,GAAA;AAAA,IAC5B,IAAM,EAAA,EAAA;AAAA,IACN,QAAQ,CAAC,GAAG,MAAM,MAAM,CAAA,CAAE,MAAM,CAAA;AAAA,IAChC,MAAM,SAAU,CAAA,MAAA;AAAA,IAChB,QAAQ,EAAC;AAAA,GACX,CAAA;AAEA,EAAA,IAAI,KAAmB,GAAA;AAAA,IACrB,KAAO,EAAA,WAAA;AAAA,IACP,MAAQ,EAAA;AAAA,MACN,MAAA;AAAA,MACA,aAAA,CAAA,cAAA,CAAA,EAAA,EACK,UAAU,CADf,CAAA,EAAA;AAAA,QAEE,MAAQ,EAAA,YAAA;AAAA,OACV,CAAA;AAAA,KACF;AAAA,IACA,MAAA;AAAA,GACF,CAAA;AAEA,EAAA,IAAI,CAAC,uBAAA,CAAwB,MAAO,CAAA,MAAM,CAAG,EAAA;AAC3C,IAAQ,KAAA,GAAA,aAAA,CAAc,OAAO,CAAC,CAAA,CAAA;AAAA,GAChC;AAEA,EAAA,OAAO,wBAAyB,CAAA;AAAA,IAC9B,KAAA;AAAA,IACA,iBAAmB,EAAA,CAAA,EAAA,GAAA,SAAA,CAAU,SAAV,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAqB,IAAK,CAAA,OAAA,EAAA;AAAA,IAC7C,iBAAmB,EAAA,CAAA,EAAA,GAAA,SAAA,CAAU,SAAV,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAqB,EAAG,CAAA,OAAA,EAAA;AAAA,GAC5C,CAAA,CAAA;AACH;;;;"}