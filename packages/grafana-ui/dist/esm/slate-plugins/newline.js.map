{"version":3,"file":"newline.js","sources":["../../../src/slate-plugins/newline.ts"],"sourcesContent":["import { Plugin } from 'slate-react';\n\nfunction getIndent(text: string) {\n  let offset = text.length - text.trimLeft().length;\n  if (offset) {\n    let indent = text[0];\n    while (--offset) {\n      indent += text[0];\n    }\n    return indent;\n  }\n  return '';\n}\n\nexport function NewlinePlugin(): Plugin {\n  return {\n    onKeyDown(event, editor, next) {\n      const value = editor.value;\n\n      if (value.selection.isExpanded) {\n        return next();\n      }\n\n      if (event.key === 'Enter') {\n        event.preventDefault();\n\n        const { startBlock } = value;\n        const currentLineText = startBlock.text;\n        const indent = getIndent(currentLineText);\n\n        return editor.splitBlock().insertText(indent).focus();\n      }\n\n      return next();\n    },\n  };\n}\n"],"names":[],"mappings":"AAEA,SAAS,UAAU,IAAc,EAAA;AAC/B,EAAA,IAAI,MAAS,GAAA,IAAA,CAAK,MAAS,GAAA,IAAA,CAAK,UAAW,CAAA,MAAA,CAAA;AAC3C,EAAA,IAAI,MAAQ,EAAA;AACV,IAAI,IAAA,MAAA,GAAS,KAAK,CAAC,CAAA,CAAA;AACnB,IAAA,OAAO,EAAE,MAAQ,EAAA;AACf,MAAA,MAAA,IAAU,KAAK,CAAC,CAAA,CAAA;AAAA,KAClB;AACA,IAAO,OAAA,MAAA,CAAA;AAAA,GACT;AACA,EAAO,OAAA,EAAA,CAAA;AACT,CAAA;AAEO,SAAS,aAAwB,GAAA;AACtC,EAAO,OAAA;AAAA,IACL,SAAA,CAAU,KAAO,EAAA,MAAA,EAAQ,IAAM,EAAA;AAC7B,MAAA,MAAM,QAAQ,MAAO,CAAA,KAAA,CAAA;AAErB,MAAI,IAAA,KAAA,CAAM,UAAU,UAAY,EAAA;AAC9B,QAAA,OAAO,IAAK,EAAA,CAAA;AAAA,OACd;AAEA,MAAI,IAAA,KAAA,CAAM,QAAQ,OAAS,EAAA;AACzB,QAAA,KAAA,CAAM,cAAe,EAAA,CAAA;AAErB,QAAM,MAAA,EAAE,YAAe,GAAA,KAAA,CAAA;AACvB,QAAA,MAAM,kBAAkB,UAAW,CAAA,IAAA,CAAA;AACnC,QAAM,MAAA,MAAA,GAAS,UAAU,eAAe,CAAA,CAAA;AAExC,QAAA,OAAO,OAAO,UAAW,EAAA,CAAE,UAAW,CAAA,MAAM,EAAE,KAAM,EAAA,CAAA;AAAA,OACtD;AAEA,MAAA,OAAO,IAAK,EAAA,CAAA;AAAA,KACd;AAAA,GACF,CAAA;AACF;;;;"}