{"version":3,"file":"useFlag.js","sources":["../../../../src/querybuilder/hooks/useFlag.ts"],"sourcesContent":["// Core Grafana history https://github.com/grafana/grafana/blob/v11.0.0-preview/public/app/plugins/datasource/prometheus/querybuilder/hooks/useFlag.ts\nimport { useCallback, useState } from 'react';\n\nimport store from '../../gcopypaste/app/core/store';\n\nexport const promQueryEditorExplainKey = 'PrometheusQueryEditorExplainDefault';\n\nexport type QueryEditorFlags = typeof promQueryEditorExplainKey;\n\nfunction getFlagValue(key: QueryEditorFlags, defaultValue = false): boolean {\n  const val = store.get(key);\n  return val === undefined ? defaultValue : Boolean(parseInt(val, 10));\n}\n\nfunction setFlagValue(key: QueryEditorFlags, value: boolean) {\n  store.set(key, value ? '1' : '0');\n}\n\ntype UseFlagHookReturnType = { flag: boolean; setFlag: (val: boolean) => void };\n\n/**\n *\n * Use and store value of explain switch in local storage.\n * Needs to be a hook with local state to trigger re-renders.\n */\nexport function useFlag(key: QueryEditorFlags, defaultValue = false): UseFlagHookReturnType {\n  const [flag, updateFlag] = useState(getFlagValue(key, defaultValue));\n  const setter = useCallback(\n    (value: boolean) => {\n      setFlagValue(key, value);\n      updateFlag(value);\n    },\n    [key]\n  );\n\n  return { flag, setFlag: setter };\n}\n"],"names":[],"mappings":";;;AAKO,MAAM,yBAA4B,GAAA,sCAAA;AAIzC,SAAS,YAAA,CAAa,GAAuB,EAAA,YAAA,GAAe,KAAgB,EAAA;AAC1E,EAAM,MAAA,GAAA,GAAM,KAAM,CAAA,GAAA,CAAI,GAAG,CAAA,CAAA;AACzB,EAAA,OAAO,QAAQ,KAAY,CAAA,GAAA,YAAA,GAAe,QAAQ,QAAS,CAAA,GAAA,EAAK,EAAE,CAAC,CAAA,CAAA;AACrE,CAAA;AAEA,SAAS,YAAA,CAAa,KAAuB,KAAgB,EAAA;AAC3D,EAAA,KAAA,CAAM,GAAI,CAAA,GAAA,EAAK,KAAQ,GAAA,GAAA,GAAM,GAAG,CAAA,CAAA;AAClC,CAAA;AASgB,SAAA,OAAA,CAAQ,GAAuB,EAAA,YAAA,GAAe,KAA8B,EAAA;AAC1F,EAAM,MAAA,CAAC,MAAM,UAAU,CAAA,GAAI,SAAS,YAAa,CAAA,GAAA,EAAK,YAAY,CAAC,CAAA,CAAA;AACnE,EAAA,MAAM,MAAS,GAAA,WAAA;AAAA,IACb,CAAC,KAAmB,KAAA;AAClB,MAAA,YAAA,CAAa,KAAK,KAAK,CAAA,CAAA;AACvB,MAAA,UAAA,CAAW,KAAK,CAAA,CAAA;AAAA,KAClB;AAAA,IACA,CAAC,GAAG,CAAA;AAAA,GACN,CAAA;AAEA,EAAO,OAAA,EAAE,IAAM,EAAA,OAAA,EAAS,MAAO,EAAA,CAAA;AACjC;;;;"}