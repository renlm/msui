{"version":3,"file":"QueryAssistantButton.js","sources":["../../../../../src/querybuilder/components/promQail/QueryAssistantButton.tsx"],"sourcesContent":["// Core Grafana history https://github.com/grafana/grafana/blob/v11.0.0-preview/public/app/plugins/datasource/prometheus/querybuilder/components/promQail/QueryAssistantButton.tsx\nimport React from 'react';\n\nimport { selectors } from '@grafana/e2e-selectors';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Button, Tooltip, useTheme2 } from '@grafana/ui';\n\nimport { getStyles } from './PromQail';\nimport AI_Logo_color from './resources/AI_Logo_color.svg';\n\nexport type Props = {\n  llmAppEnabled: boolean;\n  metric: string;\n  setShowDrawer: (show: boolean) => void;\n};\n\nexport function QueryAssistantButton(props: Props) {\n  const { llmAppEnabled, metric, setShowDrawer } = props;\n\n  const llmAppDisabled = !llmAppEnabled;\n  const noMetricSelected = !metric;\n\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const button = () => {\n    return (\n      <Button\n        variant={'secondary'}\n        onClick={() => {\n          reportInteraction('grafana_prometheus_promqail_ai_button_clicked', {\n            metric: metric,\n          });\n          setShowDrawer(true);\n        }}\n        disabled={!metric || !llmAppEnabled}\n        data-testid={selectors.components.DataSource.Prometheus.queryEditor.builder.queryAdvisor}\n      >\n        <img height={16} src={AI_Logo_color} alt=\"AI logo black and white\" />\n        {'\\u00A0'}Get query suggestions\n      </Button>\n    );\n  };\n\n  const selectMetricMessage = (\n    <Tooltip content={'First, select a metric.'} placement={'bottom-end'}>\n      {button()}\n    </Tooltip>\n  );\n\n  const llmAppMessage = (\n    <Tooltip\n      interactive={true}\n      placement={'auto-end'}\n      content={\n        <div className={styles.enableButtonTooltip}>\n          <h6>Query Advisor is disabled</h6>\n          <div className={styles.enableButtonTooltipText}>To enable Query Advisor you must:</div>\n          <div className={styles.enableButtonTooltipText}>\n            <ul>\n              <li>\n                <a\n                  href={'https://grafana.com/docs/grafana-cloud/alerting-and-irm/machine-learning/llm-plugin/'}\n                  target=\"_blank\"\n                  rel=\"noreferrer noopener\"\n                  className={styles.link}\n                >\n                  Install and enable the LLM plugin\n                </a>\n              </li>\n              <li>Select a metric</li>\n            </ul>\n          </div>\n        </div>\n      }\n    >\n      {button()}\n    </Tooltip>\n  );\n\n  if (llmAppDisabled) {\n    return llmAppMessage;\n  } else if (noMetricSelected) {\n    return selectMetricMessage;\n  } else {\n    return button();\n  }\n}\n"],"names":[],"mappings":";;;;;;;AAgBO,SAAS,qBAAqB,KAAc,EAAA;AACjD,EAAA,MAAM,EAAE,aAAA,EAAe,MAAQ,EAAA,aAAA,EAAkB,GAAA,KAAA,CAAA;AAEjD,EAAA,MAAM,iBAAiB,CAAC,aAAA,CAAA;AACxB,EAAA,MAAM,mBAAmB,CAAC,MAAA,CAAA;AAE1B,EAAA,MAAM,QAAQ,SAAU,EAAA,CAAA;AACxB,EAAM,MAAA,MAAA,GAAS,UAAU,KAAK,CAAA,CAAA;AAE9B,EAAA,MAAM,SAAS,MAAM;AACnB,IACE,uBAAA,KAAA,CAAA,aAAA;AAAA,MAAC,MAAA;AAAA,MAAA;AAAA,QACC,OAAS,EAAA,WAAA;AAAA,QACT,SAAS,MAAM;AACb,UAAA,iBAAA,CAAkB,+CAAiD,EAAA;AAAA,YACjE,MAAA;AAAA,WACD,CAAA,CAAA;AACD,UAAA,aAAA,CAAc,IAAI,CAAA,CAAA;AAAA,SACpB;AAAA,QACA,QAAA,EAAU,CAAC,MAAA,IAAU,CAAC,aAAA;AAAA,QACtB,eAAa,SAAU,CAAA,UAAA,CAAW,UAAW,CAAA,UAAA,CAAW,YAAY,OAAQ,CAAA,YAAA;AAAA,OAAA;AAAA,0CAE3E,KAAI,EAAA,EAAA,MAAA,EAAQ,IAAI,GAAK,EAAA,aAAA,EAAe,KAAI,yBAA0B,EAAA,CAAA;AAAA,MAClE,MAAA;AAAA,MAAS,uBAAA;AAAA,KACZ,CAAA;AAAA,GAEJ,CAAA;AAEA,EAAM,MAAA,mBAAA,uCACH,OAAQ,EAAA,EAAA,OAAA,EAAS,2BAA2B,SAAW,EAAA,YAAA,EAAA,EACrD,QACH,CAAA,CAAA;AAGF,EAAA,MAAM,aACJ,mBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,OAAA;AAAA,IAAA;AAAA,MACC,WAAa,EAAA,IAAA;AAAA,MACb,SAAW,EAAA,UAAA;AAAA,MACX,OAAA,kBACG,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAI,SAAW,EAAA,MAAA,CAAO,uCACpB,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,IAAA,EAAG,2BAAyB,CAAA,kBAC5B,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAI,WAAW,MAAO,CAAA,uBAAA,EAAA,EAAyB,mCAAiC,CAAA,kBAChF,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAI,SAAW,EAAA,MAAA,CAAO,uBACrB,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,IACC,EAAA,IAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,IACC,EAAA,IAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,QAAC,GAAA;AAAA,QAAA;AAAA,UACC,IAAM,EAAA,sFAAA;AAAA,UACN,MAAO,EAAA,QAAA;AAAA,UACP,GAAI,EAAA,qBAAA;AAAA,UACJ,WAAW,MAAO,CAAA,IAAA;AAAA,SAAA;AAAA,QACnB,mCAAA;AAAA,OAGH,CACA,kBAAA,KAAA,CAAA,aAAA,CAAC,YAAG,iBAAe,CACrB,CACF,CACF,CAAA;AAAA,KAAA;AAAA,IAGD,MAAO,EAAA;AAAA,GACV,CAAA;AAGF,EAAA,IAAI,cAAgB,EAAA;AAClB,IAAO,OAAA,aAAA,CAAA;AAAA,aACE,gBAAkB,EAAA;AAC3B,IAAO,OAAA,mBAAA,CAAA;AAAA,GACF,MAAA;AACL,IAAA,OAAO,MAAO,EAAA,CAAA;AAAA,GAChB;AACF;;;;"}