{"version":3,"file":"ConfigEditor.js","sources":["../../../src/configuration/ConfigEditor.tsx"],"sourcesContent":["// Core Grafana history https://github.com/grafana/grafana/blob/v11.0.0-preview/public/app/plugins/datasource/prometheus/configuration/ConfigEditor.tsx\nimport { css } from '@emotion/css';\nimport React from 'react';\n\nimport { DataSourcePluginOptionsEditorProps, GrafanaTheme2 } from '@grafana/data';\nimport { ConfigSection, DataSourceDescription, AdvancedHttpSettings } from '@grafana/experimental';\nimport { config } from '@grafana/runtime';\nimport { Alert, FieldValidationMessage, useTheme2 } from '@grafana/ui';\n\nimport { PromOptions } from '../types';\n\nimport { AlertingSettingsOverhaul } from './AlertingSettingsOverhaul';\nimport { DataSourceHttpSettingsOverhaul } from './DataSourceHttpSettingsOverhaul';\nimport { PromSettings } from './PromSettings';\n\nexport const PROM_CONFIG_LABEL_WIDTH = 30;\n\nexport type PrometheusConfigProps = DataSourcePluginOptionsEditorProps<PromOptions>;\n\nexport const ConfigEditor = (props: PrometheusConfigProps) => {\n  const { options, onOptionsChange } = props;\n  const theme = useTheme2();\n  const styles = overhaulStyles(theme);\n\n  return (\n    <>\n      {options.access === 'direct' && (\n        <Alert title=\"Error\" severity=\"error\">\n          Browser access mode in the Prometheus data source is no longer available. Switch to server access mode.\n        </Alert>\n      )}\n      <DataSourceDescription\n        dataSourceName=\"Prometheus\"\n        docsLink=\"https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/\"\n      />\n      <hr className={`${styles.hrTopSpace} ${styles.hrBottomSpace}`} />\n      <DataSourceHttpSettingsOverhaul\n        options={options}\n        onOptionsChange={onOptionsChange}\n        secureSocksDSProxyEnabled={config.secureSocksDSProxyEnabled}\n      />\n      <hr />\n      <ConfigSection\n        className={styles.advancedSettings}\n        title=\"Advanced settings\"\n        description=\"Additional settings are optional settings that can be configured for more control over your data source.\"\n      >\n        <AdvancedHttpSettings\n          className={styles.advancedHTTPSettingsMargin}\n          config={options}\n          onChange={onOptionsChange}\n        />\n        <AlertingSettingsOverhaul<PromOptions> options={options} onOptionsChange={onOptionsChange} />\n        <PromSettings options={options} onOptionsChange={onOptionsChange} />\n      </ConfigSection>\n    </>\n  );\n};\n\n/**\n * Use this to return a url in a tooltip in a field. Don't forget to make the field interactive to be able to click on the tooltip\n * @param url\n * @returns\n */\nexport function docsTip(url?: string) {\n  const docsUrl = 'https://grafana.com/docs/grafana/latest/datasources/prometheus/#configure-the-data-source';\n\n  return (\n    <a href={url ? url : docsUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n      Visit docs for more details here.\n    </a>\n  );\n}\n\nexport const validateInput = (\n  input: string,\n  pattern: string | RegExp,\n  errorMessage?: string\n): boolean | JSX.Element => {\n  const defaultErrorMessage = 'Value is not valid';\n  if (input && !input.match(pattern)) {\n    return <FieldValidationMessage>{errorMessage ? errorMessage : defaultErrorMessage}</FieldValidationMessage>;\n  } else {\n    return true;\n  }\n};\n\nexport function overhaulStyles(theme: GrafanaTheme2) {\n  return {\n    additionalSettings: css({\n      marginBottom: '25px',\n    }),\n    secondaryGrey: css({\n      color: theme.colors.secondary.text,\n      opacity: '65%',\n    }),\n    inlineError: css({\n      margin: '0px 0px 4px 245px',\n    }),\n    switchField: css({\n      alignItems: 'center',\n    }),\n    sectionHeaderPadding: css({\n      paddingTop: '32px',\n    }),\n    sectionBottomPadding: css({\n      paddingBottom: '28px',\n    }),\n    subsectionText: css({\n      fontSize: '12px',\n    }),\n    hrBottomSpace: css({\n      marginBottom: '56px',\n    }),\n    hrTopSpace: css({\n      marginTop: '50px',\n    }),\n    textUnderline: css({\n      textDecoration: 'underline',\n    }),\n    versionMargin: css({\n      marginBottom: '12px',\n    }),\n    advancedHTTPSettingsMargin: css({\n      margin: '24px 0 8px 0',\n    }),\n    advancedSettings: css({\n      paddingTop: '32px',\n    }),\n    alertingTop: css({\n      marginTop: '40px !important',\n    }),\n    overhaulPageHeading: css({\n      fontWeight: 400,\n    }),\n    container: css({\n      maxwidth: 578,\n    }),\n  };\n}\n"],"names":[],"mappings":"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"}