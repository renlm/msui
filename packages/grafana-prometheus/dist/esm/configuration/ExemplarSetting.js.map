{"version":3,"file":"ExemplarSetting.js","sources":["../../../src/configuration/ExemplarSetting.tsx"],"sourcesContent":["// Core Grafana history https://github.com/grafana/grafana/blob/v11.0.0-preview/public/app/plugins/datasource/prometheus/configuration/ExemplarSetting.tsx\nimport React, { useState } from 'react';\n\nimport { DataSourceInstanceSettings } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { config, DataSourcePicker } from '@grafana/runtime';\nimport { Button, InlineField, Input, Switch, useTheme2 } from '@grafana/ui';\n\nimport { ExemplarTraceIdDestination } from '../types';\n\nimport { docsTip, overhaulStyles, PROM_CONFIG_LABEL_WIDTH } from './ConfigEditor';\n\ntype Props = {\n  value: ExemplarTraceIdDestination;\n  onChange: (value: ExemplarTraceIdDestination) => void;\n  onDelete: () => void;\n  disabled?: boolean;\n};\n\nexport function ExemplarSetting({ value, onChange, onDelete, disabled }: Props) {\n  const [isInternalLink, setIsInternalLink] = useState(Boolean(value.datasourceUid));\n\n  const theme = useTheme2();\n  const styles = overhaulStyles(theme);\n\n  return (\n    <div className=\"gf-form-group\">\n      <InlineField\n        label=\"Internal link\"\n        labelWidth={PROM_CONFIG_LABEL_WIDTH}\n        disabled={disabled}\n        tooltip={\n          <>\n            Enable this option if you have an internal link. When enabled, this reveals the data source selector. Select\n            the backend tracing data store for your exemplar data. {docsTip()}\n          </>\n        }\n        interactive={true}\n        className={styles.switchField}\n      >\n        <>\n          <Switch\n            value={isInternalLink}\n            data-testid={selectors.components.DataSource.Prometheus.configPage.internalLinkSwitch}\n            onChange={(ev) => setIsInternalLink(ev.currentTarget.checked)}\n          />\n        </>\n      </InlineField>\n\n      {isInternalLink ? (\n        <InlineField\n          label=\"Data source\"\n          labelWidth={PROM_CONFIG_LABEL_WIDTH}\n          tooltip={<>The data source the exemplar is going to navigate to. {docsTip()}</>}\n          disabled={disabled}\n          interactive={true}\n        >\n          <DataSourcePicker\n            filter={\n              config.featureToggles.azureMonitorPrometheusExemplars\n                ? undefined\n                : (ds) => ds.type !== 'grafana-azure-monitor-datasource'\n            }\n            tracing={true}\n            current={value.datasourceUid}\n            noDefault={true}\n            width={40}\n            onChange={(ds: DataSourceInstanceSettings) =>\n              onChange({\n                ...value,\n                datasourceUid: ds.uid,\n                url: undefined,\n              })\n            }\n          />\n        </InlineField>\n      ) : (\n        <InlineField\n          label=\"URL\"\n          labelWidth={PROM_CONFIG_LABEL_WIDTH}\n          tooltip={<>The URL of the trace backend the user would go to see its trace. {docsTip()}</>}\n          disabled={disabled}\n          interactive={true}\n        >\n          <Input\n            placeholder=\"https://example.com/${__value.raw}\"\n            spellCheck={false}\n            width={40}\n            value={value.url}\n            onChange={(event) =>\n              onChange({\n                ...value,\n                datasourceUid: undefined,\n                url: event.currentTarget.value,\n              })\n            }\n          />\n        </InlineField>\n      )}\n\n      <InlineField\n        label=\"URL Label\"\n        labelWidth={PROM_CONFIG_LABEL_WIDTH}\n        tooltip={<>Use to override the button label on the exemplar traceID field. {docsTip()}</>}\n        disabled={disabled}\n        interactive={true}\n      >\n        <Input\n          placeholder=\"Go to example.com\"\n          spellCheck={false}\n          width={40}\n          value={value.urlDisplayLabel}\n          onChange={(event) =>\n            onChange({\n              ...value,\n              urlDisplayLabel: event.currentTarget.value,\n            })\n          }\n        />\n      </InlineField>\n      <InlineField\n        label=\"Label name\"\n        labelWidth={PROM_CONFIG_LABEL_WIDTH}\n        tooltip={<>The name of the field in the labels object that should be used to get the traceID. {docsTip()}</>}\n        disabled={disabled}\n        interactive={true}\n      >\n        <Input\n          placeholder=\"traceID\"\n          spellCheck={false}\n          width={40}\n          value={value.name}\n          onChange={(event) =>\n            onChange({\n              ...value,\n              name: event.currentTarget.value,\n            })\n          }\n        />\n      </InlineField>\n      {!disabled && (\n        <InlineField label=\"Remove exemplar link\" labelWidth={PROM_CONFIG_LABEL_WIDTH} disabled={disabled}>\n          <Button\n            variant=\"destructive\"\n            title=\"Remove exemplar link\"\n            icon=\"times\"\n            onClick={(event) => {\n              event.preventDefault();\n              onDelete();\n            }}\n          />\n        </InlineField>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}